{% trans_default_domain "gibbon" %}

{% extends 'kookaburra.html.twig' %}

{% set moduleName = 'Departments' %}
{% set module = {'baseURL': 'departments', 'crumbs': [{uri: 'departments__list', name: 'Departments'}], title: department.name} %}
{% set breadcrumbs = 'new' %}

{% block content %}
    {% if department.blurb is not same as ('') or role in ['Coordinator','Assistant Coordinator','Teacher (Curriculum)','Director','Manager'] %}
        <h2>{{ 'Overview'|trans }}
        {% if role in ['Coordinator','Assistant Coordinator','Teacher (Curriculum)','Director','Manager'] %}
            <a href='{{ path('legacy', {q: '/modules/departments/department_edit.php', gibbonDepartmentID: department.id}) }}'><img style='float: right; margin-left: 5px' title='{{ 'Edit'|trans }}' src='{{ asset('/themes/' ~ getThemeName() ~ '/img/config.png') }}' /></a>
        {% endif %}
        </h2>
        <p>{{ department.blurb }}</p>
    {% endif %}
    <h2>{{ 'Staff'|trans }}</h2>
    <div class="flex flex-wrap rounded-sm bg-blue-100 border py-2">
        {% for staff in department.staff %}
            <div class="flex-col w-1/2 sm:w-1/4 md:w-1/5 my-2 text-center">
                <div>
                    {% include 'components/person_photo.html.twig' with {person: staff.person, size: 'sm'} %}
                </div>
                <div class="text-xs font-bold mt-1">
                    {{ canViewProfile ? ('<a href="' ~ path('legacy', {q: '/modules/Staff/staff_view_details.php', gibbonPersonID: staff.person.id}) ~ '">' ~ staff.person.formatName(false, false, false, true, true) ~ '</a>')|raw : staff.person.formatName(false, false, false, true, true) }}

                </div>

                <div class="text-xs text-gray-600 italic leading-snug">
                    {{ staff.role|trans }}
                </div>

            </div>
        {% endfor %}
    </div>
{% endblock content %}
