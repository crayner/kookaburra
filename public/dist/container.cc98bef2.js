(window.webpackJsonp=window.webpackJsonp||[]).push([["container"],{"7K2e":function(e,t,n){"use strict";function r(e){return void 0===e||(""===e||(null===e||(e===[]||e==={})))}n.d(t,"a",function(){return r})},Bcp6:function(e,t,n){},J5mc:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n("yq1k"),n("zKZe"),n("07d7"),n("5s+n"),n("JTJg");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t,n){var a={};t&&t.headers&&(a=t.headers,delete t.headers),a=r({},a,{"Content-Type":"application/json; charset=utf-8"}),null===n&&(n="en_GB"),!1!==n&&""!==e||(n="");var o=window.location.protocol+"//"+window.location.hostname+"/";return"http"===e.substring(0,4)&&(o=""),"/"===e[0]&&(e=e.substring(1)),fetch(o+n+e,r({},t,{credentials:"same-origin",headers:a})).then(s).then(function(e){return e.text().then(function(e){return e.includes("window.Sfdump")?(console.log(e),""):"string"==typeof e?JSON.parse(e):""})})}function s(e){if(e.status>=200&&e.status<400)return e;var t=new Error(e.statusText);throw t.response=e,t}},JlTO:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("4mDm"),n("2B1R"),n("+2oP"),n("DQNa"),n("wLYn"),n("sMBO"),n("zKZe"),n("uL8W"),n("eoL8"),n("NBAS"),n("tkto"),n("ExoC"),n("07d7"),n("4l63"),n("rB9j"),n("PKPk"),n("UxlC"),n("3bBZ");var r=n("q1tI"),a=n.n(r),s=(n("17x9"),n("r3Yy")),o=n("J5mc"),l=n("VAT+"),i=n("koSi");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=f(t).call(this,e))||"object"!==c(a)&&"function"!=typeof a?b(r):a).panels=e.panels?e.panels:{},n.content=e.content?e.content:null,n.translations=e.translations,n.actionRoute=e.actionRoute,0===Object.keys(n.panels).length&&null!==n.content&&(n.panels.default={},n.panels.default.name="default",n.panels.default.disabled=!0,n.panels.default.content=n.content),n.functions={translate:n.translate.bind(b(n)),openUrl:i.k.bind(b(n)),downloadFile:i.e.bind(b(n)),onSelectTab:n.onSelectTab.bind(b(n)),deleteFile:n.deleteFile.bind(b(n)),submitForm:n.submitForm.bind(b(n)),onElementChange:n.onElementChange.bind(b(n)),deleteElement:n.deleteElement.bind(b(n)),addElement:n.addElement.bind(b(n)),onCKEditorChange:n.onCKEditorChange.bind(b(n)),generateNewPassword:n.generateNewPassword.bind(b(n)),selectLibraryAndType:n.selectLibraryAndType.bind(b(n)),loadGoogleBookData:n.loadGoogleBookData.bind(b(n)),renderImageLocation:n.renderImageLocation.bind(b(n))},n.state={forms:u({},e.forms),panelErrors:{},selectedPanel:e.selectedPanel,submit:!1},n.formNames={},n.submit={},n.singleForm=1===Object.keys(e.forms).length,n}var h,p,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),h=t,(p=[{key:"componentDidMount",value:function(){var e=this;Object.keys(this.state.forms).map(function(t){var n=e.state.forms[t];e.formNames[n.name]=t,e.submit[n.name]=!1});var t={};this.singleForm&&(t=Object(i.n)({},{})),this.setMyState(this.state.forms,t)}},{key:"loadGoogleBookData",value:function(){var e=this,t=""!==this.state.forms.single.children.field6.value?this.state.forms.single.children.field6.value:this.state.forms.single.children.field5.value;if(""===t){var n=u({},this.state.forms.single);n.errors.push({class:"warning",message:this.translate("Please enter an ISBN13 or ISBN10 value before trying to get data from Google Books.")});var r=u({},this.state.forms);return r.single=n,void this.setMyState(r)}var a="https://www.googleapis.com/books/v1/volumes?q=isbn:"+t;Object(o.a)(a,[],!1).then(function(t){var n=u({},e.state.forms.single);if(0===t.totalItems)return n.errors.push({class:"warning",message:e.translate("The specified record cannot be found.")}),void e.setMyState({single:n});var r=t.items[0];n.children.name.value=r.volumeInfo.title;for(var a="",s=0;s<r.volumeInfo.authors.length;s++)a=a+r.volumeInfo.authors[s]+", ";n.children.producer.value=a,n.children.field1.value=r.volumeInfo.publisher;var o=new Date(r.volumeInfo.publishedDate);n.children.field2.value=("000"+o.getDate()).slice(-2)+"/"+("000"+(o.getMonth()+1)).slice(-2)+"/"+o.getFullYear(),n.children.field7.value=r.volumeInfo.description,"ISBN_10"===r.volumeInfo.industryIdentifiers[0].type&&(n.children.field5.value=r.volumeInfo.industryIdentifiers[0].identifier),"ISBN_13"===r.volumeInfo.industryIdentifiers[1].type&&(n.children.field6.value=r.volumeInfo.industryIdentifiers[1].identifier),n.children.field14.value=r.volumeInfo.pageCount;var l=r.volumeInfo.printType.toLowerCase();l=l.charAt(0).toUpperCase()+l.slice(1),n.children.field0.value=l,n.children.field19.value=r.volumeInfo.infoLink;var i=void 0!==r.volumeInfo.imageLinks?r.volumeInfo.imageLinks.thumbnail:"";""!==i&&(n.children.imageType.value="Link",n.children.imageLink.value=i),n.children.field18.value=r.volumeInfo.language;var c="";if(void 0!==r.volumeInfo.categories){for(var m=0;m<r.volumeInfo.categories.length;m++)c=c+r.volumeInfo.categories[m]+", ";n.children.field8.value=c.substring(0,c.length-2)}e.setMyState({single:n})}).catch(function(t){var n=u({},e.state.forms.single);n.errors.push({class:"error",message:t}),e.setMyState({single:n})})}},{key:"selectLibraryAndType",value:function(e){var t=this,n=u({},this.state.forms.single),r=e.target.id,a=e.target.value;"edit_library"===r&&(n.children.library.value=a),"edit_itemType"===r&&(n.children.itemType.value=a),this.setMyState({single:n});var s=Object.keys(n.children.itemType.choices).filter(function(e){var t=n.children.itemType.choices[e];if(t.value===n.children.itemType.value)return t});if(n.children.library.value>0&&s!==[]){var l={library:n.children.library.value,itemType:n.children.itemType.value,_token:n.children._token.value};Object(o.a)(n.action,{method:n.method,body:JSON.stringify(l)},!1).then(function(e){var r=n.errors;r=r.concat(e.errors),(n=e.form).errors=r,t.setMyState({single:u({},n)},Object(i.n)(n,{}),"General")}).catch(function(e){n.errors.push({class:"error",message:e}),t.setMyState({single:u({},n)},Object(i.n)(u({},n),{}))})}}},{key:"setMyState",value:function(e,t,n){void 0===t&&(t=this.state.panelErrors),void 0===n&&(n=this.state.selectedPanel),void 0!==e.forms&&(e=u({},e.forms)),this.setState({forms:e,panelErrors:t,selectedPanel:n,submit:Object(i.i)(this.submit)})}},{key:"translate",value:function(e){return Object(i.o)(this.translations,e)}},{key:"onSelectTab",value:function(e){var t=this.state.selectedPanel,n=0;Object.keys(this.panels).map(function(r){n===e&&(t=r),n++}),this.setState({selectedPanel:t})}},{key:"deleteFile",value:function(e){var t=this,n="/resource/"+btoa(e.value)+"/"+this.actionRoute+"/delete/";void 0!==e.delete_security&&!1!==e.delete_security&&(n="/resource/"+btoa(e.value)+"/"+e.delete_security+"/delete/");var r=Object(i.g)(this.state.forms,e);Object(o.a)(n,{},!1).then(function(n){if("success"===n.status){var a=r.errors;a=a.concat(n.errors),r.errors=a,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),Object(i.c)(r,e,"")),t.singleForm))}else{var s=r.errors;s=s.concat(n.errors),r.errors=s,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),r),t.singleForm))}}).catch(function(n){var a=r.errors;a.push({class:"error",message:n}),r.errors=a,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),r),t.singleForm))})}},{key:"generateNewPassword",value:function(e){var t=Object(l.a)(e.generateButton.passwordPolicy),n=Object(i.g)(this.state.forms,e),r=e.id.replace("first","second");n=u({},Object(i.c)(n,e,t));var a=Object(i.f)(n,r,{});alert(e.generateButton.alertPrompt+": "+t),n=Object(i.c)(n,a,t),this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,e),n)))}},{key:"onCKEditorChange",value:function(e,t,n){var r=t.getData();this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,n),Object(i.c)(Object(i.g)(this.state.forms,n),n,r))))}},{key:"onElementChange",value:function(e,t){var n=this,r=t.submit_on_change,a=Object(i.g)(this.state.forms,t),s=Object(i.h)(this.formNames,t);if("toggle"!==t.type){if("file"===t.type){var o=e.target.files[0],l=new FileReader;return l.readAsDataURL(o),l.onerror=function(e){a.errors.push({class:"error",message:n.functions.translations("A problem occurred loading the file.")}),n.setMyState(Object(i.b)(Object(i.j)(n.state.forms,s,Object(i.c)(a,t,o)),n.singleForm))},void(l.onload=function(e){o=e.target.result,n.setMyState(Object(i.b)(Object(i.j)(n.state.forms,s,Object(i.c)(a,t,o))))})}var c=e.target.value;t.value=c;var m=Object(i.c)(u({},a),t,c);this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,s,m),this.singleForm)),r&&this.submitForm({},t)}else{var f="Y"===t.value?"N":"Y";this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,s,Object(i.c)(a,t,f)),this.singleForm))}}},{key:"submitForm",value:function(e,t){var n=this,r=Object(i.h)(this.formNames,t);if(!this.submit[r]){this.submit[r]=!0,this.setState({submit:!0});var a=u({},this.state.forms),s=u({},Object(i.g)(a,t)),l=Object(i.a)({},s);Object(o.a)(s.action,{method:s.method,body:JSON.stringify(l)},!1).then(function(e){if("redirect"===e.status)window.open(e.redirect,"_self");else{var t=s.errors;t=t.concat(e.errors);var o=u({},e.form);o.errors=t,n.submit[r]=!1,n.setMyState(Object(i.b)(u({},Object(i.j)(a,r,u({},o))),n.singleForm),Object(i.n)(u({},o),{}))}}).catch(function(e){s.errors.push({class:"error",message:e}),n.submit[r]=!1,n.setMyState(Object(i.b)(u({},Object(i.j)(a,r,u({},s))),n.singleForm),Object(i.n)(u({},t),{}))})}}},{key:"deleteElement",value:function(e){var t=this,n=Object(i.g)(this.state.forms,e),r=n;if(n=Object(i.d)(n,e),this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,e),n),this.singleForm)),"boolean"!=typeof e.never_saved){var a=e.id.replace("_"+e.name,""),s=Object(i.f)(n,a,{}),l=s.element_delete_route;"object"!==c(s.element_delete_options)&&(s.element_delete_options={});var m=!0;if(Object.keys(s.element_delete_options).map(function(t){var n=s.element_delete_options[t];l=l.replace(t,e.children[n].value),parseInt(e.children[n].value)<1&&(m=!1)}),!1===m)return;Object(o.a)(l,[],!1).then(function(a){var s=n.errors;s=s.concat(a.errors),n.errors=s,"success"===a.status?t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),n),t.singleForm)):t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),u({},r)),t.singleForm))}).catch(function(a){var s=(n=u({},r)).errors;s.push({class:"error",message:a}),n.errors=s,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),n),t.singleForm))})}}},{key:"addElement",value:function(e){var t=n("xk4V")(),r=u({},Object(i.m)(u({},e.prototype),t)),a=u({},Object(i.g)(this.state.forms,e)),s=Object(i.h)(this.formNames,e);if(r.children.id.value=t,"object"===c(e.children)){var o=[];Object.keys(e.children).map(function(t){o.push(u({},e.children[t]))}),e.children=o}void 0===e.children&&(e.children=[]),r.never_saved=!0,e.children.push(u({},r)),a=u({},Object(i.l)(a,e)),this.setMyState(Object(i.b)(u({},Object(i.j)(this.state.forms,s,a)),this.singleForm))}},{key:"renderImageLocation",value:function(e){var t=u({},this.state.forms.single);t.children.imageType.value=e.target.value,"Link"===e.target.value?(t.children.imageLocation.type="url",t.children.imageLocation.label=this.translate("Image Link")):(t.children.imageLocation.type="file",t.children.imageLocation.label=this.translate("Image File"));var n=u({},Object(i.g)(this.state.forms,t)),r=Object(i.h)(this.formNames,t);console.log(t),console.log(e.target.value),this.setMyState(Object(i.b)(u({},Object(i.j)(this.state.forms,r,n)),this.singleForm))}},{key:"render",value:function(){return a.a.createElement("section",null,this.state.submit?a.a.createElement("div",{className:"waitOne info"},this.functions.translate("Let me ponder your request"),"..."):"",a.a.createElement(s.a,{panels:this.panels,selectedPanel:this.state.selectedPanel,functions:this.functions,forms:this.state.forms,actionRoute:this.actionRoute,singleForm:this.singleForm,translations:this.translations,panelErrors:this.state.panelErrors}))}}])&&m(h.prototype,p),y&&m(h,y),t}();h.defaultProps={functions:{},translations:{},forms:{}}},Ngpf:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("4mDm"),n("2B1R"),n("wLYn"),n("sMBO"),n("zKZe"),n("uL8W"),n("eoL8"),n("NBAS"),n("tkto"),n("ExoC"),n("07d7"),n("4l63"),n("rB9j"),n("PKPk"),n("UxlC"),n("3bBZ");var r=n("q1tI"),a=n.n(r),s=(n("17x9"),n("r3Yy")),o=n("J5mc"),l=n("VAT+"),i=n("koSi");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=f(t).call(this,e))||"object"!==c(a)&&"function"!=typeof a?b(r):a).panels=e.panels?e.panels:{},n.content=e.content?e.content:null,n.translations=e.translations,n.actionRoute=e.actionRoute,n.extras=e.extras,0===Object.keys(n.panels).length&&null!==n.content&&(n.panels.default={},n.panels.default.name="default",n.panels.default.disabled=!0,n.panels.default.content=n.content),n.functions={translate:n.translate.bind(b(n)),openUrl:i.k.bind(b(n)),downloadFile:i.e.bind(b(n)),onSelectTab:n.onSelectTab.bind(b(n)),deleteFile:n.deleteFile.bind(b(n)),submitForm:n.submitForm.bind(b(n)),onElementChange:n.onElementChange.bind(b(n)),deleteElement:n.deleteElement.bind(b(n)),addElement:n.addElement.bind(b(n)),onCKEditorChange:n.onCKEditorChange.bind(b(n)),generateNewPassword:n.generateNewPassword.bind(b(n)),toggleSMSRows:n.toggleSMSRows.bind(b(n)),toggleMailerRows:n.toggleMailerRows.bind(b(n)),setParentState:n.setMyState.bind(b(n))},n.toggleSMSRowsOnValue=n.toggleSMSRowsOnValue.bind(b(n)),n.toggleMailerRowsOnValue=n.toggleMailerRowsOnValue.bind(b(n)),n.state={selectedPanel:e.selectedPanel,forms:u({},e.forms),panelErrors:{}},n.formNames={},n.submit={},n.singleForm=1===Object.keys(e.forms).length,n}var h,p,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),h=t,(p=[{key:"componentDidMount",value:function(){var e=this;Object.keys(this.state.forms).map(function(t){var n=e.state.forms[t];e.formNames[n.name]=t,e.submit[n.name]=!1});var t={};this.singleForm&&(t=Object(i.n)({},{})),this.setMyState(this.state.forms,t)}},{key:"setMyState",value:function(e,t){void 0!==e.panelErrors&&(t=e.panelErrors,e=u({},e.forms)),void 0===t&&(t=this.state.panelErrors);var n=e.SMS.children.smsSettings.children.Messenger__smsGateway.value;n=(e=this.toggleSMSRowsOnValue(n,u({},e)))["E-Mail"].children.emailSettings.children.System__enableMailerSMTP.value,e=this.toggleMailerRowsOnValue(n,e),this.setState({forms:e,panelErrors:t})}},{key:"toggleSMSRows",value:function(e,t){this.setMyState(this.toggleSMSRowsOnValue(e.target.value,u({},this.state.forms)))}},{key:"toggleMailerRows",value:function(e,t){this.setMyState(this.toggleMailerRowsOnValue(e.target.value,u({},this.state.forms)))}},{key:"toggleSMSRowsOnValue",value:function(e,t){""!==e&&null!==e&&"N"!==e||(e="No");var n=u({},t.SMS),r=this.extras[e],a=n.children.smsSettings;return a.children.Messenger__smsGateway.value=e,Object.keys(r).map(function(e){var t=r[e];a.children[e].row_style="hidden",!0===t.visible&&(a.children[e].row_style="standard",a.children[e].label=t.label,a.children[e].help=null,"string"==typeof t.help&&(a.children[e].help=t.help))}),n.children.smsSettings=a,t.SMS=n,t}},{key:"toggleMailerRowsOnValue",value:function(e,t){""!==e&&null!==e&&"N"!==e||(e="No"),"Y"===e&&(e="SMTP");var n=u({},t["E-Mail"]),r=this.extras.mailer[e],a=n.children.emailSettings;return a.children.System__enableMailerSMTP.value=e,Object.keys(r).map(function(e){var t=r[e];a.children[e].row_style="hidden",!0===t.visible&&(a.children[e].row_style="standard",a.children[e].label=t.label,a.children[e].help=null,"string"==typeof t.help&&(a.children[e].help=t.help))}),n.children.emailSettings=a,t["E-Mail"]=n,t}},{key:"translate",value:function(e){return Object(i.o)(this.translations,e)}},{key:"onSelectTab",value:function(e){var t=this.state.selectedPanel,n=0;Object.keys(this.panels).map(function(r){n===e&&(t=r),n++}),this.setState({selectedPanel:t})}},{key:"deleteFile",value:function(e){var t=this,n="/resource/"+btoa(e.value)+"/"+this.actionRoute+"/delete/";void 0!==e.delete_security&&!1!==e.delete_security&&(n="/resource/"+btoa(e.value)+"/"+e.delete_security+"/delete/");var r=Object(i.g)(this.state.forms,e);Object(o.a)(n,{},!1).then(function(n){if("success"===n.status){var a=r.errors;a=a.concat(n.errors),r.errors=a,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),Object(i.c)(r,e,"")),t.singleForm))}else{var s=r.errors;s=s.concat(n.errors),r.errors=s,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),r),t.singleForm))}}).catch(function(n){var a=r.errors;a.push({class:"error",message:n}),r.errors=a,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),r),t.singleForm))})}},{key:"generateNewPassword",value:function(e){var t=Object(l.a)(e.generateButton.passwordPolicy),n=Object(i.g)(this.state.forms,e),r=e.id.replace("first","second");n=u({},Object(i.c)(n,e,t));var a=Object(i.f)(n,r,{});alert(e.generateButton.alertPrompt+": "+t),n=Object(i.c)(n,a,t),this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,e),n)))}},{key:"onCKEditorChange",value:function(e,t,n){var r=t.getData();this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,n),Object(i.c)(Object(i.g)(this.state.forms,n),n,r))))}},{key:"onElementChange",value:function(e,t){var n=this,r=t.submit_on_change,a=Object(i.g)(this.state.forms,t),s=Object(i.h)(this.formNames,t);if("toggle"!==t.type){if("file"===t.type){var o=e.target.files[0],l=new FileReader;return l.readAsDataURL(o),l.onerror=function(e){a.errors.push({class:"error",message:n.functions.translations("A problem occurred loading the file.")}),n.setMyState(Object(i.b)(Object(i.j)(n.state.forms,s,Object(i.c)(a,t,o)),n.singleForm))},void(l.onload=function(e){o=e.target.result,n.setMyState(Object(i.b)(Object(i.j)(n.state.forms,s,Object(i.c)(a,t,o))))})}var c=e.target.value;t.value=c;var m=Object(i.c)(u({},a),t,c);this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,s,m),this.singleForm)),r&&this.submitForm({},t)}else{var f="Y"===t.value?"N":"Y";this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,s,Object(i.c)(a,t,f)),this.singleForm))}}},{key:"submitForm",value:function(e,t){var n=this,r=Object(i.h)(this.formNames,t);if(!this.submit[r]){this.submit[r]=!0,this.setMyState(Object(i.b)(u({},this.state.forms),this.singleForm));var a=u({},Object(i.g)(this.state.forms,t)),s=Object(i.a)({},a);Object(o.a)(a.action,{method:a.method,body:JSON.stringify(s)},!1).then(function(e){if("redirect"===e.status)window.open(e.redirect,"_self");else{var t=a.errors;t=t.concat(e.errors);var s=u({},e.form);s.errors=t,n.submit[r]=!1,n.setMyState(Object(i.b)(u({},Object(i.j)(n.state.forms,r,u({},s))),n.singleForm),Object(i.n)(u({},s),{}))}}).catch(function(e){a.errors.push({class:"error",message:e}),n.submit[r]=!1,n.setMyState(Object(i.b)(u({},Object(i.j)(n.state.forms,r,u({},a))),n.singleForm),Object(i.n)(u({},t),{}))})}}},{key:"deleteElement",value:function(e){var t=this,n=Object(i.g)(this.state.forms,e),r=n;if(n=Object(i.d)(n,e),this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,e),n),this.singleForm)),"boolean"!=typeof e.never_saved){var a=e.id.replace("_"+e.name,""),s=Object(i.f)(n,a,{}),l=s.element_delete_route;"object"!==c(s.element_delete_options)&&(s.element_delete_options={});var m=!0;if(Object.keys(s.element_delete_options).map(function(t){var n=s.element_delete_options[t];l=l.replace(t,e.children[n].value),parseInt(e.children[n].value)<1&&(m=!1)}),!1===m)return;Object(o.a)(l,[],!1).then(function(a){var s=n.errors;s=s.concat(a.errors),n.errors=s,"success"===a.status?t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),n),t.singleForm)):t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),u({},r)),t.singleForm))}).catch(function(a){var s=(n=u({},r)).errors;s.push({class:"error",message:a}),n.errors=s,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),n),t.singleForm))})}}},{key:"addElement",value:function(e){var t=n("xk4V")(),r=u({},Object(i.m)(u({},e.prototype),t)),a=u({},Object(i.g)(this.state.forms,e)),s=Object(i.h)(this.formNames,e);if(r.children.id.value=t,"object"===c(e.children)){var o=[];Object.keys(e.children).map(function(t){o.push(u({},e.children[t]))}),e.children=o}void 0===e.children&&(e.children=[]),r.never_saved=!0,e.children.push(u({},r)),a=u({},Object(i.l)(a,e)),this.setMyState(Object(i.b)(u({},Object(i.j)(this.state.forms,s,a)),this.singleForm))}},{key:"render",value:function(){return a.a.createElement("section",null,Object(i.i)(this.submit)?a.a.createElement("div",{className:"waitOne info"},this.functions.translate("Let me ponder your request"),"..."):"",a.a.createElement(s.a,{panels:this.panels,selectedPanel:this.state.selectedPanel,functions:this.functions,forms:this.state.forms,actionRoute:this.actionRoute,singleForm:this.singleForm,translations:this.translations,panelErrors:this.state.panelErrors}))}}])&&m(h.prototype,p),y&&m(h,y),t}();h.defaultProps={functions:{},translations:{},forms:{}}},RrZK:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("4mDm"),n("2B1R"),n("wLYn"),n("sMBO"),n("zKZe"),n("uL8W"),n("eoL8"),n("NBAS"),n("tkto"),n("ExoC"),n("07d7"),n("4l63"),n("rB9j"),n("PKPk"),n("UxlC"),n("3bBZ");var r=n("q1tI"),a=n.n(r),s=(n("17x9"),n("r3Yy")),o=n("J5mc"),l=n("VAT+"),i=n("koSi");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=f(t).call(this,e))||"object"!==c(a)&&"function"!=typeof a?b(r):a).panels=e.panels?e.panels:{},n.content=e.content?e.content:null,n.functions=e.functions,n.translations=e.translations,n.actionRoute=e.actionRoute,0===Object.keys(n.panels).length&&null!==n.content&&(n.panels.default={},n.panels.default.name="default",n.panels.default.disabled=!0,n.panels.default.content=n.content),n.functions={translate:n.translate.bind(b(n)),openUrl:i.k.bind(b(n)),downloadFile:i.e.bind(b(n)),onSelectTab:n.onSelectTab.bind(b(n)),deleteFile:n.deleteFile.bind(b(n)),submitForm:n.submitForm.bind(b(n)),onElementChange:n.onElementChange.bind(b(n)),deleteElement:n.deleteElement.bind(b(n)),addElement:n.addElement.bind(b(n)),onCKEditorChange:n.onCKEditorChange.bind(b(n)),generateNewPassword:n.generateNewPassword.bind(b(n)),manageLinkOrFile:n.manageLinkOrFile.bind(b(n))},n.state={selectedPanel:e.selectedPanel,forms:u({},e.forms),panelErrors:{}},n.formNames={},n.submit={},n.singleForm=1===Object.keys(e.forms).length,console.log(n.state),n}var h,p,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),h=t,(p=[{key:"componentDidMount",value:function(){var e=this;Object.keys(this.state.forms).map(function(t){var n=e.state.forms[t];e.formNames[n.name]=t,e.submit[n.name]=!1});var t={};this.singleForm&&(t=Object(i.n)({},t)),this.manageURLTypes(u({},this.state.forms.single),t)}},{key:"setMyState",value:function(e,t){this.manageURLTypes(u({},e.single),t)}},{key:"manageURLTypes",value:function(e,t){e.children.resources.children.map(function(t,n){"File"===t.children.type.value?e.children.resources.children[n].children.url.type="file":(e.children.resources.children[n].children.url.type="url",e.children.resources.children[n].children.type.value="Link")}),this.setState({forms:{single:e},panelErrors:t})}},{key:"translate",value:function(e){return Object(i.o)(this.translations,e)}},{key:"onSelectTab",value:function(e){var t=this.state.selectedPanel,n=0;Object.keys(this.panels).map(function(r){n===e&&(t=r),n++}),this.setState({selectedPanel:t})}},{key:"deleteFile",value:function(e){var t=this,n="/resource/"+btoa(e.value)+"/"+this.actionRoute+"/delete/";void 0!==e.delete_security&&!1!==e.delete_security&&(n="/resource/"+btoa(e.value)+"/"+e.delete_security+"/delete/");var r=Object(i.g)(this.state.forms,e);Object(o.a)(n,{},!1).then(function(n){if("success"===n.status){var a=r.errors;a=a.concat(n.errors),r.errors=a,t.setState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),Object(i.c)(r,e,"")),t.singleForm))}else{var s=r.errors;s=s.concat(n.errors),r.errors=s,t.setState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),r),t.singleForm))}}).catch(function(n){var a=r.errors;a.push({class:"error",message:n}),r.errors=a,t.setState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),r),t.singleForm))})}},{key:"generateNewPassword",value:function(e){var t=Object(l.a)(e.generateButton.passwordPolicy),n=Object(i.g)(this.state.forms,e),r=e.id.replace("first","second");n=u({},Object(i.c)(n,e,t));var a=Object(i.f)(n,r,{});alert(e.generateButton.alertPrompt+": "+t),n=Object(i.c)(n,a,t),this.setState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,e),n)))}},{key:"onCKEditorChange",value:function(e,t,n){var r=t.getData();this.setState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,n),Object(i.c)(Object(i.g)(this.state.forms,n),n,r))))}},{key:"onElementChange",value:function(e,t){var n=this,r=t.submit_on_change,a=Object(i.g)(this.state.forms,t),s=Object(i.h)(this.formNames,t);if("toggle"!==t.type){if("file"===t.type){var o=e.target.files[0],l=new FileReader;return l.readAsDataURL(o),l.onerror=function(e){a.errors.push({class:"error",message:n.functions.translations("A problem occurred loading the file.")}),n.setState(Object(i.b)(Object(i.j)(n.state.forms,s,Object(i.c)(a,t,o)),n.singleForm))},void(l.onload=function(e){o=e.target.result,n.setState(Object(i.b)(Object(i.j)(n.state.forms,s,Object(i.c)(a,t,o))))})}var c=e.target.value;t.value=c;var m=Object(i.c)(u({},a),t,c);this.setState(Object(i.b)(Object(i.j)(this.state.forms,s,m),this.singleForm)),r&&this.submitForm({},t)}else{var f="Y"===t.value?"N":"Y";this.setState(Object(i.b)(Object(i.j)(this.state.forms,s,Object(i.c)(a,t,f)),this.singleForm))}}},{key:"submitForm",value:function(e,t){var n=this,r=Object(i.h)(this.formNames,t);if(!this.submit[r]){this.submit[r]=!0,this.setState(Object(i.b)(u({},this.state.forms),this.singleForm));var a=u({},Object(i.g)(this.state.forms,t)),s=Object(i.a)({},a);Object(o.a)(a.action,{method:a.method,body:JSON.stringify(s)},!1).then(function(e){if("redirect"===e.status)window.open(e.redirect,"_self");else{var t=a.errors;t=t.concat(e.errors);var s="function"==typeof n.functions.submitFormCallable?n.functions.submitFormCallable(e.form):e.form;s.errors=t,n.submit[r]=!1,n.setState(Object(i.b)(u({},Object(i.j)(n.state.forms,r,u({},s))),n.singleForm))}}).catch(function(e){a.errors.push({class:"error",message:e}),n.submit[r]=!1,n.setState(Object(i.b)(u({},Object(i.j)(n.state.forms,r,u({},a))),n.singleForm))})}}},{key:"deleteElement",value:function(e){var t=this,n=Object(i.g)(this.state.forms,e),r=n;if(n=Object(i.d)(n,e),this.setState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,e),n),this.singleForm)),"boolean"!=typeof e.never_saved){var a=e.id.replace("_"+e.name,""),s=Object(i.f)(n,a,{}),l=s.element_delete_route;"object"!==c(s.element_delete_options)&&(s.element_delete_options={});var m=!0;if(Object.keys(s.element_delete_options).map(function(t){var n=s.element_delete_options[t];l=l.replace(t,e.children[n].value),parseInt(e.children[n].value)<1&&(m=!1)}),!1===m)return;Object(o.a)(l,[],!1).then(function(a){var s=n.errors;s=s.concat(a.errors),n.errors=s,"success"===a.status?("function"==typeof t.functions.deleteElementCallable&&(e=t.functions.deleteElementCallable(a,e)),t.setState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),n),t.singleForm))):t.setState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),u({},r)),t.singleForm))}).catch(function(a){var s=(n=u({},r)).errors;s.push({class:"error",message:a}),n.errors=s,t.setState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),n),t.singleForm))})}}},{key:"addElement",value:function(e){var t=n("xk4V")(),r=u({},Object(i.m)(u({},e.prototype),t)),a=u({},Object(i.g)(this.state.forms,e)),s=Object(i.h)(this.formNames,e);if(r.children.id.value=t,"object"===c(e.children)){var o=[];Object.keys(e.children).map(function(t){o.push(u({},e.children[t]))}),e.children=o}void 0===e.children?e.children=[]:(r.children.type.value="Link",r.children.url.type="url",r.children.department.value=this.state.forms.single.children.id.value),r.never_saved=!0,e.children.push(u({},r)),a=u({},Object(i.l)(a,e)),this.setState(Object(i.b)(u({},Object(i.j)(this.state.forms,s,a)),this.singleForm))}},{key:"manageLinkOrFile",value:function(e,t){var n=t.id.replace("department_edit_resources_","");n=n.replace("_type","");var r={},a=null,s=u({},this.state.forms.single);s.children.resources.children.map(function(e,t){n===e.name&&(r=e,a=t)}),"File"===e.target.value?(r.children.url.type="file",r.children.type.value="File"):(r.children.url.type="url",r.children.type.value="Link"),s.children.resources.children[a]=r,this.setMyState({single:s})}},{key:"render",value:function(){return a.a.createElement("section",null,Object(i.i)(this.submit)?a.a.createElement("div",{className:"waitOne info"},this.functions.translate("Let me ponder your request"),"..."):"",a.a.createElement(s.a,{panels:this.panels,selectedPanel:this.state.selectedPanel,functions:this.functions,forms:this.state.forms,actionRoute:this.actionRoute,singleForm:this.singleForm,translations:this.translations,panelErrors:this.state.panelErrors}))}}])&&m(h.prototype,p),y&&m(h,y),t}();h.defaultProps={functions:{},translations:{},forms:{}}},"VAT+":function(e,t,n){"use strict";n.d(t,"a",function(){return r});n("TWNs"),n("rB9j"),n("JfAA");function r(e){var t="abcdefghijklmnopqrstuvwxyz";t+="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t+="0123456789",t+="#?!@$%^+=&*-";var n="^(.*(?=.*[a-z])";e.alpha&&(n+="(?=.*[A-Z])"),e.numeric&&(n+="(?=.*[0-9])"),e.punctuation&&(n+="(?=.*?[#?!@$%^+=&*-])"),n+=".*){"+e.minLength+",}$",n=new RegExp(n);for(var r=e.minLength<12?12:e.minLength,a="",s=0;s<r;s++)a+=t.charAt(Math.floor(Math.random()*t.length));for(;!1===n.test(a);){a="";for(var o=0;o<r;o++)a+=t.charAt(Math.floor(Math.random()*t.length))}return a}},koSi:function(e,t,n){"use strict";n.d(t,"n",function(){return l}),n.d(t,"o",function(){return i}),n.d(t,"e",function(){return c}),n.d(t,"k",function(){return u}),n.d(t,"b",function(){return m}),n.d(t,"g",function(){return f}),n.d(t,"h",function(){return b}),n.d(t,"j",function(){return d}),n.d(t,"l",function(){return h}),n.d(t,"m",function(){return p}),n.d(t,"d",function(){return y}),n.d(t,"c",function(){return v}),n.d(t,"i",function(){return j}),n.d(t,"f",function(){return O}),n.d(t,"a",function(){return g});n("pNMO"),n("4Brf"),n("0oug"),n("yXV3"),n("4mDm"),n("2B1R"),n("pDQq"),n("sMBO"),n("zKZe"),n("tkto"),n("07d7"),n("rB9j"),n("PKPk"),n("UxlC"),n("3bBZ");var r=n("7K2e"),a=n("ohO+");n("J5mc");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){return void 0===e.children?t:(Object.keys(e.children).map(function(n){var r=e.children[n];l(r,t),Object.keys(r.errors).length>0&&!1!==r.panel&&(void 0===t[r.panel]&&(t[r.panel]={}),t[r.panel].problem=!0)}),t)}function i(e,t){return Object(r.a)(e[t])?(console.error("Unable to translate: "+t),t):e[t]}function c(e){var t=e.value,n="/resource/"+btoa(t)+"/"+this.actionRoute+"/download/";void 0!==e.delete_security&&!1!==e.delete_security&&(n="/resource/"+btoa(e.value)+"/"+e.delete_security+"/download/"),Object(a.a)(n,{target:"_blank"},!1)}function u(e){window.open(e,"_blank")}function m(e,t){var n={};return t&&(n=l(e[Object.keys(e)[0]],n)),{forms:e,panelErrors:n}}function f(e,t){var n={};return Object.keys(e).map(function(t){var r=e[t];n[r.name]=t}),e[b(n,t)]}function b(e,t){return e[t.full_name.substring(0,t.full_name.indexOf("["))]}function d(e,t,n){return e[t]=o({},n),e}function h(e,t){return"object"===s(e.children)?Object.keys(e.children).map(function(n){h(e.children[n],t).id===t.id&&(e.children[n]=t)}):"array"==typeof e.children&&e.children.map(function(n,r){(n=h(n,t)).id===t.id&&(e.children[r]=t)}),e.id===t.id&&(e=t),e}function p(e,t){return"object"===s((e=o({},e)).children)&&(e.children=o({},e.children),Object.keys(e.children).map(function(n){var r=p(e.children[n],t);e.children[n]=r})),e.name=e.name.replace("__name__",t),e.id=e.id.replace("__name__",t),e.full_name=e.full_name.replace("__name__",t),"string"==typeof e.label&&(e.label=e.label.replace("__name__",t)),e}function y(e,t){return"object"===s(e.children)&&Object.keys(e.children).map(function(n){y(e.children[n],t).id===t.id&&delete e.children[n]}),"array"==typeof e.children&&e.children.map(function(n,r){(n=y(n,t)).id===t.id&&e.children.splice(r,1)}),e}function v(e,t,n){var r=o({},e);if("object"===s(r.children)&&Object.keys(r.children).length>0){var a=o({},r.children);return Object.keys(a).map(function(e){var r=o({},a[e]);r.id===t.id?(r.value=n,Object.assign(a[e],o({},r))):Object.assign(a[e],v(o({},r),t,n))}),Object.assign(r.children,o({},a)),o({},r)}return o({},r)}function j(e){var t=!1;return Object.keys(e).map(function(n){e[n]&&(t=!0)}),t}function O(e,t,n){return"string"==typeof n.id&&n.id===t?n:"object"===s(e.children)?(Object.keys(e.children).map(function(r){var a=e.children[r];a.id===t&&(n=a),n=O(e.children[r],t,n)}),n):"array"==typeof e.children?(e.children.map(function(e,r){e.id===t&&(n=e),n=O(e,t,n)}),n):n}function g(e,t){return"object"===s(t.children)&&Object.keys(t.children).length>0?(Object.keys(t.children).map(function(n){var r=t.children[n];e[r.name]=g({},r)}),e):"array"==typeof t.children&&t.children.length>0?(t.children.map(function(t){e[t.name]=g({},t)}),e):t.value}},"nXi/":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("4mDm"),n("2B1R"),n("wLYn"),n("sMBO"),n("zKZe"),n("uL8W"),n("eoL8"),n("NBAS"),n("tkto"),n("ExoC"),n("07d7"),n("4l63"),n("rB9j"),n("PKPk"),n("UxlC"),n("3bBZ");var r=n("q1tI"),a=n.n(r),s=(n("17x9"),n("r3Yy")),o=n("J5mc"),l=n("VAT+"),i=n("koSi");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=f(t).call(this,e))||"object"!==c(a)&&"function"!=typeof a?b(r):a).panels=e.panels?e.panels:{},n.content=e.content?e.content:null,n.extras=e.extras,n.translations=e.translations,n.actionRoute=e.actionRoute,0===Object.keys(n.panels).length&&null!==n.content&&(n.panels.default={},n.panels.default.name="default",n.panels.default.disabled=!0,n.panels.default.content=n.content),n.functions={translate:n.translate.bind(b(n)),openUrl:i.k.bind(b(n)),downloadFile:i.e.bind(b(n)),onSelectTab:n.onSelectTab.bind(b(n)),deleteFile:n.deleteFile.bind(b(n)),submitForm:n.submitForm.bind(b(n)),onElementChange:n.onElementChange.bind(b(n)),deleteElement:n.deleteElement.bind(b(n)),addElement:n.addElement.bind(b(n)),onCKEditorChange:n.onCKEditorChange.bind(b(n)),generateNewPassword:n.generateNewPassword.bind(b(n)),toggleScopeType:n.toggleScopeType.bind(b(n))},n.state={selectedPanel:e.selectedPanel,forms:u({},e.forms),panelErrors:{},submit:!1},n.formNames={},n.submit={},n.singleForm=1===Object.keys(e.forms).length,n}var h,p,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),h=t,(p=[{key:"componentDidMount",value:function(){var e=this;Object.keys(this.state.forms).map(function(t){var n=e.state.forms[t];e.formNames[n.name]=t,e.submit[n.name]=!1});var t={};this.singleForm&&(t=Object(i.n)({},{})),this.setMyState(this.state.forms,t)}},{key:"setMyState",value:function(e,t){var n=this;void 0!==e.panelErrors&&(t=e.panelErrors,e=u({},e.forms));var r=void 0===e.single.children.listeners.children?[]:e.single.children.listeners.children,a=[];"object"!==c(r)&&(r=[]),Object.keys(r).map(function(e){var t=u({},r[e]);a=n.setListenerChildByScope(r,e,t.children.scopeType.value)}),e.single.children.listeners.children=a,void 0===t&&(t=this.state.panelErrors),this.setState({forms:e,panelErrors:t,submit:Object(i.i)(this.submit)})}},{key:"toggleScopeType",value:function(e,t){var n=e.target.value,r=this.state.forms.single.children.listeners.children,a=t.id.replace("notification_event_listeners_","").replace("_scopeType",""),s="jjj";Object.keys(r).map(function(e){r[e].name===a&&(s=e)}),r=this.setListenerChildByScope(r,s,n);var o=this.state.forms;o.single.children.listeners.children=r,this.setMyState(o)}},{key:"translate",value:function(e){return Object(i.o)(this.translations,e)}},{key:"onSelectTab",value:function(e){var t=this.state.selectedPanel,n=0;Object.keys(this.panels).map(function(r){n===e&&(t=r),n++}),this.setState({selectedPanel:t})}},{key:"deleteFile",value:function(e){var t=this,n="/resource/"+btoa(e.value)+"/"+this.actionRoute+"/delete/";void 0!==e.delete_security&&!1!==e.delete_security&&(n="/resource/"+btoa(e.value)+"/"+e.delete_security+"/delete/");var r=Object(i.g)(this.state.forms,e);Object(o.a)(n,{},!1).then(function(n){if("success"===n.status){var a=r.errors;a=a.concat(n.errors),r.errors=a,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),Object(i.c)(r,e,"")),t.singleForm))}else{var s=r.errors;s=s.concat(n.errors),r.errors=s,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),r),t.singleForm))}}).catch(function(n){var a=r.errors;a.push({class:"error",message:n}),r.errors=a,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),r),t.singleForm))})}},{key:"generateNewPassword",value:function(e){var t=Object(l.a)(e.generateButton.passwordPolicy),n=Object(i.g)(this.state.forms,e),r=e.id.replace("first","second");n=u({},Object(i.c)(n,e,t));var a=Object(i.f)(n,r,{});alert(e.generateButton.alertPrompt+": "+t),n=Object(i.c)(n,a,t),this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,e),n)))}},{key:"onCKEditorChange",value:function(e,t,n){var r=t.getData();this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,n),Object(i.c)(Object(i.g)(this.state.forms,n),n,r))))}},{key:"onElementChange",value:function(e,t){var n=this,r=t.submit_on_change,a=Object(i.g)(this.state.forms,t),s=Object(i.h)(this.formNames,t);if("toggle"!==t.type){if("file"===t.type){var o=e.target.files[0],l=new FileReader;return l.readAsDataURL(o),l.onerror=function(e){a.errors.push({class:"error",message:n.functions.translations("A problem occurred loading the file.")}),n.setMyState(Object(i.b)(Object(i.j)(n.state.forms,s,Object(i.c)(a,t,o)),n.singleForm))},void(l.onload=function(e){o=e.target.result,n.setMyState(Object(i.b)(Object(i.j)(n.state.forms,s,Object(i.c)(a,t,o))))})}var c=e.target.value;t.value=c;var m=Object(i.c)(u({},a),t,c);this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,s,m),this.singleForm)),r&&this.submitForm({},t)}else{var f="Y"===t.value?"N":"Y";this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,s,Object(i.c)(a,t,f)),this.singleForm))}}},{key:"submitForm",value:function(e,t){var n=this,r=Object(i.h)(this.formNames,t);if(!this.submit[r]){this.submit[r]=!0,this.setState({submit:!0});var a=u({},Object(i.g)(this.state.forms,t)),s=Object(i.a)({},a);Object(o.a)(a.action,{method:a.method,body:JSON.stringify(s)},!1).then(function(e){if("redirect"===e.status)window.open(e.redirect,"_self");else{var t=a.errors;t=t.concat(e.errors);var s=u({},e.form);s.errors=t,n.submit[r]=!1,n.setMyState(Object(i.b)(u({},Object(i.j)(n.state.forms,r,u({},s))),n.singleForm),Object(i.n)(u({},s),{}))}}).catch(function(e){a.errors.push({class:"error",message:e}),n.submit[r]=!1,n.setMyState(Object(i.b)(u({},Object(i.j)(n.state.forms,r,u({},a))),n.singleForm),Object(i.n)(u({},t),{}))})}}},{key:"deleteElement",value:function(e){var t=this,n=Object(i.g)(this.state.forms,e),r=n;if(n=Object(i.d)(n,e),this.setMyState(Object(i.b)(Object(i.j)(this.state.forms,Object(i.h)(this.formNames,e),n),this.singleForm)),"boolean"!=typeof e.never_saved){var a=e.id.replace("_"+e.name,""),s=Object(i.f)(n,a,{}),l=s.element_delete_route;"object"!==c(s.element_delete_options)&&(s.element_delete_options={});var m=!0;if(Object.keys(s.element_delete_options).map(function(t){var n=s.element_delete_options[t];l=l.replace(t,e.children[n].value),parseInt(e.children[n].value)<1&&(m=!1)}),!1===m)return;Object(o.a)(l,[],!1).then(function(a){var s=n.errors;s=s.concat(a.errors),n.errors=s,"success"===a.status?t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),n),t.singleForm)):t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),u({},r)),t.singleForm))}).catch(function(a){var s=(n=u({},r)).errors;s.push({class:"error",message:a}),n.errors=s,t.setMyState(Object(i.b)(Object(i.j)(t.state.forms,Object(i.h)(t.formNames,e),n),t.singleForm))})}}},{key:"addElement",value:function(e){var t=n("xk4V")(),r=u({},Object(i.m)(u({},e.prototype),t));r.children.scopeType.value="All",r.children.person.value="",r.children.scopeID.type="display",r.children.scopeID.value="",r.children.event.value=this.state.forms.single.children.id.value,1===Object.keys(r.children.scopeType.choices).length?(r.children.scopeType.type="display",r.children.scopeType.value="All"):(r.children.scopeType.type="choice",r.children.scopeType.value="All");var a=u({},Object(i.g)(this.state.forms,e)),s=Object(i.h)(this.formNames,e);if(r.children.id.value=t,"object"===c(e.children)){var o=[];Object.keys(e.children).map(function(t){o.push(u({},e.children[t]))}),e.children=o}void 0===e.children&&(e.children=[]),r.never_saved=!0,e.children.push(u({},r)),a=u({},Object(i.l)(a,e)),this.setMyState(Object(i.b)(u({},Object(i.j)(this.state.forms,s,a)),this.singleForm))}},{key:"setListenerChildByScope",value:function(e,t,n){var r=e[t];return r.children.scopeType.value=n,("All"===n||""===n)&&(r.children.scopeID.type="display",r.children.scopeID.value="",1===Object.keys(r.children.scopeType.choices).length?(r.children.scopeType.type="display",r.children.scopeType.value="All"):r.children.scopeType.type="choice"),r.children.scopeID.placeholder=r.children.person.placeholder,"gibbonPersonIDStudent"===n&&(r.children.scopeID.type="choice",r.children.scopeID.choices=this.extras.students),"gibbonYearGroupID"===n&&(r.children.scopeID.type="choice",r.children.scopeID.choices=this.extras.yearGroups),"gibbonStaffID"===n&&(r.children.scopeID.type="choice",r.children.scopeID.choices=this.extras.staff),e[t]=r,e}},{key:"render",value:function(){return a.a.createElement("section",null,this.state.submit?a.a.createElement("div",{className:"waitOne info"},this.functions.translate("Let me ponder your request"),"..."):"",a.a.createElement(s.a,{panels:this.panels,selectedPanel:this.state.selectedPanel,functions:this.functions,forms:this.state.forms,actionRoute:this.actionRoute,singleForm:this.singleForm,translations:this.translations,panelErrors:this.state.panelErrors}))}}])&&m(h.prototype,p),y&&m(h,y),t}();h.defaultProps={functions:{},translations:{},forms:{}}},"ohO+":function(e,t,n){"use strict";function r(e,t,n){var r="_self";t&&"string"==typeof t.target&&(r=t.target);var a="";t&&"string"==typeof t.specs&&(a=t.specs),"boolean"==typeof n&&!1===n&&(n=""),null==n&&(n="en_GB"),""!==n&&(n="/"+n),window.open(window.location.protocol+"//"+window.location.hostname+n+e,r,a)}n.d(t,"a",function(){return r})},r3Yy:function(e,t,n){"use strict";n("zKZe"),n("tkto");var r=n("q1tI"),a=n.n(r),s=(n("17x9"),n("76ZC")),o=n.n(s),l=(n("2B1R"),n("sMBO"),n("GTV5"));n("Bcp6"),n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("07d7"),n("PKPk"),n("3bBZ");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n={};return n.className=t,null!==e.row_class&&(n.className=e.row_class),!1!==e.row_id&&(n.id=e.row_id),n}function u(e,t){var n=!1===e.column_attr?{}:e.column_attr;return void 0!==n.class&&(n.className=n.class,delete n.class),void 0===n.className&&(n.className=t),n}function m(e,t,n){var r="object"!==i(e.attr)?{}:e.attr;return void 0!==r.class&&(r.className=r.class,delete r.class),void 0===r.className&&(r.className=t),r.id=e.id,r.name=e.full_name,r.onChange=null,!1===e.on_change&&"function"==typeof n.onElementChange?r.onChange=function(t){return n.onElementChange(t,e)}:"function"==typeof n[e.on_change]&&(r.onChange=function(t){return n[e.on_change](t,e)}),r.onClick=null,!1===e.on_click&&"function"==typeof n.onElementClick?r.onClick=function(t){return n.onElementClick(t,e)}:"function"==typeof n[e.on_click]&&(r.onClick=function(t){return n[e.on_click](t,e)}),!1!==e.multiple&&(r.multiple=!0),"string"==typeof r.inputmode&&(r.inputMode=r.inputmode,delete r.inputmode),r["aria-describedby"]=e.id+"_help",r}function f(e,t){var n={};return n.className=t,null!==e.wrapper_class&&(n.className=e.wrapper_class),n}function b(e){var t=e.form,n=(e.functions,e.columns),r=c(t,"break flex flex-col sm:flex-row justify-between content-center p-0"),s=u(t,"flex-grow justify-center px-2 border-b-0 sm:border-b border-t-0");n>1&&(s.colSpan=n);var l=a.a.createElement("h3",null,t.label);"h4"===t.header_type&&(l=a.a.createElement("h4",null,t.label));var i="";return"string"==typeof t.help&&(i=t.help),a.a.createElement("tr",r,a.a.createElement("td",s,l,o()(i)))}function d(e){var t=e.form,n=(e.functions,e.columns),r=c(t,"break flex flex-col sm:flex-row justify-between content-center p-0"),s=u(t,"flex-grow justify-center px-2 border-b-0 sm:border-b border-t-0");n>1&&(s.colSpan=n);var l=f(t,"");return a.a.createElement("tr",r,a.a.createElement("td",s,a.a.createElement("div",l,o()(t.help))))}n("+2oP");var h=n("AEIT"),p=n.n(h),y=n("+z1p"),v=n.n(y);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e){var t=e.form,n=e.functions;if(!1===t.header_row)return null;var r=j({},t.prototype);if(!0===t.header_row){var s=Object.keys(r.children).map(function(e){var t=r.children[e];if("hidden"!==t.type)return"string"==typeof t.help?a.a.createElement("th",{className:"text-xxs sm:text-xs p-2 sm:py-3",key:t.name},t.label,a.a.createElement("br",null),a.a.createElement("span",{className:"text-gray-500 xs emphasis"},t.help)):a.a.createElement("th",{className:"text-xxs sm:text-xs p-2 sm:py-3",key:t.name},t.label)});return s.push(a.a.createElement("th",{className:"shortWidth text-xxs sm:text-xs p-2 sm:py-3 text-center",key:"actions"},n.translate("Actions"))),a.a.createElement("thead",null,a.a.createElement("tr",null,s))}if("array"==typeof t.header_row){var o=t.header_row.map(function(e,t){return"string"==typeof e.help?a.a.createElement("th",j({},e.attr,{key:e.name}),e.label,a.a.createElement("br",null),a.a.createElement("span",{className:"text-gray-500 small"},e.help)):a.a.createElement("th",j({},e.attr,{key:e.name}),e.label)});return a.a.createElement("thead",null,a.a.createElement("tr",null,o))}}n("pDQq"),n("wLYn"),n("uL8W"),n("eoL8"),n("NBAS"),n("ExoC");function g(e){var t=e.message,n=e.cancelMessage,r=e.translate;return"string"==typeof t.message?a.a.createElement("div",{className:t.class},t.message,a.a.createElement("button",{className:"button close "+t.class,onClick:function(){return n(t.id)},title:r("Close Message"),type:"button"},a.a.createElement("span",{className:"fas fa-times-circle fa-fw "+t.class}))):(console.log(t),null)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var F=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=w(t).call(this,e))||"object"!==E(a)&&"function"!=typeof a?_(r):a).translate=e.translate,n.cancelMessage=n.cancelMessage.bind(_(n)),n}var n,s,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,r["Component"]),n=t,(s=[{key:"cancelMessage",value:function(e){var t=this.props.messages;t.splice(e,1),this.setState({messages:t})}},{key:"render",value:function(){var e=this,t=Object.keys(this.props.messages).map(function(t){var n=e.props.messages[t];if(void 0===n)return"";if("string"==typeof n){var r={};r.message=n,r.class="error",r.id=t,n=S({},r)}return n.id=t,a.a.createElement(g,{message:n,translate:e.translate,key:"message_"+n.id,cancelMessage:e.cancelMessage})});return 0===t.length?null:a.a.createElement("div",null,t)}}])&&k(n.prototype,s),o&&k(n,o),t}();function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e){var t=e.form,n=e.functions,r=e.columnCount,s=m(t,"leftIndent smallIntBorder standardForm striped",{});delete s.name;var o=t.errors,l=a.a.createElement(O,{form:t,functions:n}),i=[];return Object.keys(o).length>0&&i.push(a.a.createElement("tr",{key:"errors"},a.a.createElement("td",{colSpan:r},a.a.createElement("div",{className:"errors flex-1 relative"},o)))),void 0!==t.children&&Object.keys(t.children).length>0?Object.keys(t.children).map(function(e){var r=t.children[e],s=[],o=[];Object.keys(r.children).map(function(e){var t=r.children[e];"hidden"!==t.type?s.push(a.a.createElement("td",{key:e},a.a.createElement(L,{form:M({},t),functions:n}))):o.push(a.a.createElement(L,{form:M({},t),functions:n,key:e}))});var l=[];t.allow_delete&&l.push(a.a.createElement("button",{title:n.translate("Delete"),onClick:function(){return n.deleteElement(r)},className:"button text-gray-800",type:"button",key:"one"},a.a.createElement("span",{className:"far fa-trash-alt fa-fw"}))),s.push(a.a.createElement("td",{key:"actions"},o,a.a.createElement("div",{className:"text-center"},l))),i.push(a.a.createElement("tr",{key:e},s))}):i.push(a.a.createElement("tr",{key:"emptyWarning"},a.a.createElement("td",{colSpan:r},a.a.createElement("div",{className:"warning"},n.translate("There are no records to display."))))),i.push(a.a.createElement("tr",{key:"addRow"},a.a.createElement("td",{colSpan:r-1}),a.a.createElement("td",null,a.a.createElement("div",{className:"text-center"},a.a.createElement("button",{title:n.translate("Add"),onClick:function(){return n.addElement(t)},className:"button text-gray-800",type:"button",key:"one"},a.a.createElement("span",{className:"fas fa-plus-circle fa-fw"})))))),a.a.createElement("div",{className:"collection"},a.a.createElement(F,{messages:o,translate:n.translate}),a.a.createElement("table",s,l,a.a.createElement("tbody",null,i)))}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e){var t=e.functions,n=e.form,r=0,s=x({},n.prototype);return Object.keys(s.children).map(function(e){"hidden"!==s.children[e].type&&r++}),r++,a.a.createElement(P,{form:n,functions:t,columnCount:r,key:n.collection_key})}P.defaultProps={errors:[]};var T=n("7K2e");function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e){var t=e.form,n=e.wrapper_attr,r=e.widget_attr,s=e.errors,o=[];return void 0!==t.placeholder&&!1!==t.placeholder&&o.push(a.a.createElement("option",{key:"placeholder",className:"text-gray-500"},t.placeholder)),Object.keys(t.choices).map(function(e){if(void 0===t.choices[e].choices)o.push(a.a.createElement("option",{value:t.choices[e].value,key:t.choices[e].value},t.choices[e].label));else{var n=t.choices[e].label,r=[];Object.keys(t.choices[e].choices).map(function(n){r.push(a.a.createElement("option",{value:t.choices[e].choices[n].value,key:t.choices[e].choices[n].value},t.choices[e].choices[n].label))}),o.push(a.a.createElement("optgroup",{key:n,label:n},r))}}),a.a.createElement("div",n,a.a.createElement("select",R({multiple:t.multiple},r,{value:t.value}),o),s)}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e){var t=e.form,n=e.functions,r=f(t,"flex-1 relative"),s="form element "+t.type,o=m(t,"w-full",n),l=[];if(t.errors.length>0&&(r.className+=" errors",l=t.errors.map(function(e,t){return a.a.createElement("li",{key:t},e)})),"ckeditor"===t.type)return a.a.createElement("div",r,a.a.createElement(p.a,{editor:v.a,data:t.value,"aria-describedby":t.id+"_help",onChange:function(e,r){return n.onCKEditorChange(e,r,t)}}),t.errors.length>0?a.a.createElement("ul",null,l):"");if("submit"===t.type)return o.type="button",o.style={float:"right"},o.className="btn-gibbon",o.onClick=function(e){return n.submitForm(e,t)},a.a.createElement("div",r,a.a.createElement("span",{className:"emphasis small"},"* ",t.help),a.a.createElement("button",o,t.label));if("button"===t.type)return o.type="button",o.style={float:"right"},o.className="btn-gibbon",a.a.createElement("div",r,a.a.createElement("button",o,t.label));if("hidden"===t.type)return o.type="hidden",a.a.createElement("input",o);if("email"===t.type)return o.type="email",a.a.createElement("div",r,a.a.createElement("input",B({},o,{defaultValue:t.value})),t.errors.length>0?a.a.createElement("ul",null,l):"");if("password_generator"===t.type){o.type="password";return a.a.createElement("div",r,a.a.createElement("input",B({},o,{defaultValue:t.value})),a.a.createElement("button",B({type:"button",title:t.generateButton.title,className:t.generateButton.class},{},{onClick:function(){return n[t.generateButton.onClick](t)}}),t.generateButton.title),t.errors.length>0?a.a.createElement("ul",null,l):"")}if("password"===t.type)return o.type="password",a.a.createElement("div",r,a.a.createElement("input",B({},o,{defaultValue:t.value})),t.errors.length>0?a.a.createElement("ul",null,l):"");if("url"===t.type){o.type="url";var i={};return Object(T.a)(t.value)&&(i.disabled=!0),a.a.createElement("div",r,a.a.createElement("input",B({},o,{defaultValue:t.value})),a.a.createElement("button",B({type:"button",title:n.translate("Open Link"),className:"button button-right"},i,{onClick:function(){return n.openUrl(t.value)}}),a.a.createElement("span",{className:"fa-fw fas fa-external-link-alt"})),t.errors.length>0?a.a.createElement("ul",null,l):"")}if("file"===t.type){o.type="file";var c={};return Object(T.a)(t.value)&&(c.disabled=!0),a.a.createElement("div",r,a.a.createElement("input",o),a.a.createElement("div",{className:"button-right"},a.a.createElement("button",B({type:"button",title:n.translate("File Download"),className:"button"},c,{onClick:function(){return n.downloadFile(t)}}),a.a.createElement("span",{className:"fa-fw fas fa-file-download"})),a.a.createElement("button",B({type:"button",title:n.translate("File Delete"),className:"button"},c,{onClick:function(){return n.deleteFile(t)}}),a.a.createElement("span",{className:"fa-fw fas fa-trash"}))),t.errors.length>0?a.a.createElement("ul",null,l):"")}if("date"===t.type){var u=("0000"+t.value.year).slice(-4)+"-"+("00"+t.value.month).slice(-2)+"-"+("00"+t.value.day).slice(-2);return o.type="date",a.a.createElement("div",r,a.a.createElement("input",B({},o,{defaultValue:u})),t.errors.length>0?a.a.createElement("ul",null,l):"")}if("text"===t.type)return o.type="text",a.a.createElement("div",r,a.a.createElement("input",B({},o,{defaultValue:t.value})),t.errors.length>0?a.a.createElement("ul",null,l):"");if("collection"===t.type)return void 0===t.children&&(t.children=[]),a.a.createElement(C,{form:t,functions:n,key:t.collection_key});if("choice"===t.type)return a.a.createElement(I,{form:t,wrapper_attr:r,widget_attr:o,errors:l});if("textarea"===t.type)return a.a.createElement("div",r,a.a.createElement("textarea",B({},o,{defaultValue:t.value})),t.errors.length>0?a.a.createElement("ul",null,l):"");if("toggle"===t.type){o.type="hidden",r.className+=" right";var b={onClick:function(e){return n.onElementChange(e,t)},className:"button"};delete o.onChange;var d={className:"fa-fw far fa-thumbs-down"};return"Y"===t.value||"1"===t.value?(d.className="fa-fw far fa-thumbs-up",b.className+=" success",t.value="Y"):t.value="N",a.a.createElement("div",r,a.a.createElement("input",B({},o,{defaultValue:t.value})),a.a.createElement("button",B({type:"button",title:n.translate("Yes/No")},b),a.a.createElement("span",d)),t.errors.length>0?a.a.createElement("ul",null,l):"")}return"integer"===t.type?(o.type="number",a.a.createElement("div",r,a.a.createElement("input",B({},o,{defaultValue:t.value})),t.errors.length>0?a.a.createElement("ul",null,l):"")):"display"===t.type?a.a.createElement("div",r,t.value,t.errors.length>0?a.a.createElement("ul",null,l):""):(console.log(t),a.a.createElement("div",r,s))}function D(e){var t=e.form,n=e.functions,r=e.columns;!1===t.column_attr&&r>1&&(t.column_attr={}),r>1&&(t.column_attr.colSpan=r);var s=c(t,"flex flex-col sm:flex-row justify-between content-center p-0"),o=u(t,"flex-grow justify-center px-2 border-b-0 sm:border-b border-t-0");return a.a.createElement("tr",s,a.a.createElement("td",o,a.a.createElement(L,{form:t,functions:n})))}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e){var t=e.form,n=[],r=function(e,t){var n={};return n.className=t,n}(0,"inline-block mt-4 sm:my-1 sm:max-w-xs font-bold text-sm sm:text-xs");"string"==typeof t.help&&(n.push(a.a.createElement("br",{key:"newLine"})),n.push(a.a.createElement("span",{key:"message",className:"text-xxs text-gray-600 italic font-normal mt-1 sm:mt-0"},o()(t.help))));var s="";return!0===t.required&&(s=" *"),a.a.createElement("label",A({htmlFor:t.id},r),t.label,s,n)}function V(e){var t=e.form,n=e.functions;return a.a.createElement("tr",{className:"flex flex-col sm:flex-row justify-between content-center p-0"},a.a.createElement("td",{className:"flex flex-col flex-grow justify-center -mb-1 sm:mb-0  px-2 border-b-0 sm:border-b border-t-0"},a.a.createElement(K,{form:t})),a.a.createElement("td",{className:"w-full max-w-full sm:max-w-xs flex justify-end items-center px-2 border-b-0 sm:border-b border-t-0"},a.a.createElement(L,{form:t,functions:n})))}function Y(e){var t=e.form,n=e.functions,r=e.columns;return t.columns=r,"hidden"===t.type&&"hidden"!==t.row_style&&(t.row_style="hidden"),"header"===t.type?a.a.createElement(b,{form:t,functions:n,columns:r}):"paragraph"===t.type?a.a.createElement(d,{form:t,functions:n,columns:r}):"transparent"===t.type?Object.keys(t.children).map(function(e){var s=t.children[e];return a.a.createElement(Y,{form:s,key:s.name,functions:n,columns:r})}):"single"===t.row_style||"submit"===t.type?a.a.createElement(D,{form:t,functions:n,columns:r}):"hidden"===t.row_style?a.a.createElement("tr",{style:{display:"none"}},a.a.createElement("td",null,a.a.createElement(L,{form:t,functions:n}))):"standard"===t.row_style?a.a.createElement(V,{form:t,functions:n}):"transparent"===t.row_style||"repeated"===t.row_style?Object.keys(t.children).map(function(e){var s=t.children[e];return"password_generator"===s.type&&"second"===e&&(s.type="password"),a.a.createElement(Y,{form:s,key:s.name,functions:n,columns:r})}):(console.log(t),a.a.createElement("tr",null,a.a.createElement("td",null," Form Row ",t.row_style)))}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function J(e){var t=e.functions,n=e.form,r=e.formName,s=e.singleForm;if("table"===n.template){var o=[];Object.keys(n.children).map(function(e){var s=n.children[e];!1!==s.panel&&s.panel!==r||o.push(a.a.createElement(Y,{key:e,form:s,functions:t,columns:n.columns}))});for(var l=[],i=0;i<l;i++)l.push(a.a.createElement("td",{key:i}));var c=a.a.createElement("tr",{style:{display:"none"}},l),u={className:"smallIntBorder fullWidth standardForm relative"};return null!==n.row_class&&(u.className=n.row_class),s?a.a.createElement("div",null,a.a.createElement(F,{messages:n.errors,translate:t.translate}),a.a.createElement("table",u,a.a.createElement("tbody",null,c,o))):a.a.createElement("form",U({action:n.action,id:n.id},n.attr,{method:void 0!==n.method?n.method:"POST"}),a.a.createElement(F,{messages:n.errors,translate:t.translate}),a.a.createElement("table",u,a.a.createElement("tbody",null,c,o)))}return null}function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e){var t=e.panels,n=e.selectedIndex,r=e.functions,s=e.singleForm,i=e.translations,c=e.panelErrors,u=Object.keys(t).map(function(e){var n=t[e],r=void 0!==c[e]?"text-red-400":"",s=void 0!==c[e]?i["Errors on Tab"]:"";return a.a.createElement(l.a,{key:n.name,disabled:n.disabled},a.a.createElement("span",{className:r,title:s},n.label))}),m=Object.keys(t).map(function(n){var r=function(e,t){if(null!==e.content)return o()(e.content);var n=t.forms[e.name];void 0===n&&(n=t.forms[Object.keys(t.forms)[0]]);return a.a.createElement(J,Z({},t,{formName:e.name,form:n}))}(t[n],e);return a.a.createElement(l.c,{key:n},r)});if(s){var f=e.forms[Object.keys(e.forms)[0]];return a.a.createElement("form",Z({action:f.action,id:f.id},f.attr,{method:void 0!==f.method?f.method:"POST"}),a.a.createElement("div",{className:"info"},i["All fields on all panels are saved together."]),a.a.createElement(l.d,{selectedIndex:n,onSelect:function(e){return r.onSelectTab(e)}},a.a.createElement(l.b,null,u),m))}return a.a.createElement(l.d,{selectedIndex:n,onSelect:function(e){return r.onSelectTab(e)}},a.a.createElement(l.b,null,u),m)}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function z(e){var t=e.panels,n=e.forms,r=e.selectedPanel,s=e.functions,l=e.singleForm,i=t[r].index;if(1===Object.keys(t).length){var c=Object.keys(t)[0],u=t[c];return null!==u.content?o()(u.content):a.a.createElement(J,G({},e,{form:n[c],functions:s,formName:c,singleForm:l}))}return a.a.createElement(q,G({},e,{panels:t,selectedIndex:i,functions:s,singleForm:l}))}I.defaultProps={errors:[]},n.d(t,"a",function(){return z})},vSyi:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),s=n("i8i4"),o=(n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("4mDm"),n("2B1R"),n("wLYn"),n("sMBO"),n("zKZe"),n("uL8W"),n("eoL8"),n("NBAS"),n("tkto"),n("ExoC"),n("07d7"),n("4l63"),n("rB9j"),n("PKPk"),n("UxlC"),n("3bBZ"),n("17x9"),n("r3Yy")),l=n("J5mc"),i=n("VAT+"),c=n("koSi");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=b(t).call(this,e))||"object"!==u(a)&&"function"!=typeof a?d(r):a).panels=e.panels?e.panels:{},n.content=e.content?e.content:null,n.translations=e.translations,n.actionRoute=e.actionRoute,0===Object.keys(n.panels).length&&null!==n.content&&(n.panels.default={},n.panels.default.name="default",n.panels.default.disabled=!0,n.panels.default.content=n.content),n.functions={translate:n.translate.bind(d(n)),openUrl:c.k.bind(d(n)),downloadFile:c.e.bind(d(n)),onSelectTab:n.onSelectTab.bind(d(n)),deleteFile:n.deleteFile.bind(d(n)),submitForm:n.submitForm.bind(d(n)),onElementChange:n.onElementChange.bind(d(n)),deleteElement:n.deleteElement.bind(d(n)),addElement:n.addElement.bind(d(n)),onCKEditorChange:n.onCKEditorChange.bind(d(n)),generateNewPassword:n.generateNewPassword.bind(d(n))},n.state={selectedPanel:e.selectedPanel,forms:m({},e.forms),panelErrors:{},submit:!1},n.formNames={},n.submit={},n.singleForm=1===Object.keys(e.forms).length,n}var s,p,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),s=t,(p=[{key:"componentDidMount",value:function(){var e=this;Object.keys(this.state.forms).map(function(t){var n=e.state.forms[t];e.formNames[n.name]=t,e.submit[n.name]=!1});var t={};this.singleForm&&(t=Object(c.n)({},{})),this.setMyState(this.state.forms,t)}},{key:"setMyState",value:function(e,t){void 0!==e.panelErrors&&(t=e.panelErrors,e=m({},e.forms)),void 0===t&&(t=this.state.panelErrors),this.setState({forms:e,panelErrors:t,submit:Object(c.i)(this.submit)})}},{key:"translate",value:function(e){return Object(c.o)(this.translations,e)}},{key:"onSelectTab",value:function(e){var t=this.state.selectedPanel,n=0;Object.keys(this.panels).map(function(r){n===e&&(t=r),n++}),this.setState({selectedPanel:t})}},{key:"deleteFile",value:function(e){var t=this,n="/resource/"+btoa(e.value)+"/"+this.actionRoute+"/delete/";void 0!==e.delete_security&&!1!==e.delete_security&&(n="/resource/"+btoa(e.value)+"/"+e.delete_security+"/delete/");var r=Object(c.g)(this.state.forms,e);Object(l.a)(n,{},!1).then(function(n){if("success"===n.status){var a=r.errors;a=a.concat(n.errors),r.errors=a,t.setMyState(Object(c.b)(Object(c.j)(t.state.forms,Object(c.h)(t.formNames,e),Object(c.c)(r,e,"")),t.singleForm))}else{var s=r.errors;s=s.concat(n.errors),r.errors=s,t.setMyState(Object(c.b)(Object(c.j)(t.state.forms,Object(c.h)(t.formNames,e),r),t.singleForm))}}).catch(function(n){var a=r.errors;a.push({class:"error",message:n}),r.errors=a,t.setMyState(Object(c.b)(Object(c.j)(t.state.forms,Object(c.h)(t.formNames,e),r),t.singleForm))})}},{key:"generateNewPassword",value:function(e){var t=Object(i.a)(e.generateButton.passwordPolicy),n=Object(c.g)(this.state.forms,e),r=e.id.replace("first","second");n=m({},Object(c.c)(n,e,t));var a=Object(c.f)(n,r,{});alert(e.generateButton.alertPrompt+": "+t),n=Object(c.c)(n,a,t),this.setMyState(Object(c.b)(Object(c.j)(this.state.forms,Object(c.h)(this.formNames,e),n)))}},{key:"onCKEditorChange",value:function(e,t,n){var r=t.getData();this.setMyState(Object(c.b)(Object(c.j)(this.state.forms,Object(c.h)(this.formNames,n),Object(c.c)(Object(c.g)(this.state.forms,n),n,r))))}},{key:"onElementChange",value:function(e,t){var n=this,r=t.submit_on_change,a=Object(c.g)(this.state.forms,t),s=Object(c.h)(this.formNames,t);if("toggle"!==t.type){if("file"===t.type){var o=e.target.files[0],l=new FileReader;return l.readAsDataURL(o),l.onerror=function(e){a.errors.push({class:"error",message:n.functions.translations("A problem occurred loading the file.")}),n.setMyState(Object(c.b)(Object(c.j)(n.state.forms,s,Object(c.c)(a,t,o)),n.singleForm))},void(l.onload=function(e){o=e.target.result,n.setMyState(Object(c.b)(Object(c.j)(n.state.forms,s,Object(c.c)(a,t,o))))})}var i=e.target.value;t.value=i;var u=Object(c.c)(m({},a),t,i);this.setMyState(Object(c.b)(Object(c.j)(this.state.forms,s,u),this.singleForm)),r&&this.submitForm({},t)}else{var f="Y"===t.value?"N":"Y";this.setMyState(Object(c.b)(Object(c.j)(this.state.forms,s,Object(c.c)(a,t,f)),this.singleForm))}}},{key:"submitForm",value:function(e,t){var n=this,r=Object(c.h)(this.formNames,t);if(!this.submit[r]){this.submit[r]=!0,this.setState({submit:!0});var a=m({},Object(c.g)(this.state.forms,t)),s=Object(c.a)({},a);Object(l.a)(a.action,{method:a.method,body:JSON.stringify(s)},!1).then(function(e){if("redirect"===e.status)window.open(e.redirect,"_self");else{var t=a.errors;t=t.concat(e.errors);var s=m({},e.form);s.errors=t,n.submit[r]=!1,n.setMyState(Object(c.b)(m({},Object(c.j)(n.state.forms,r,m({},s))),n.singleForm),Object(c.n)(m({},s),{}))}}).catch(function(e){a.errors.push({class:"error",message:e}),n.submit[r]=!1,n.setMyState(Object(c.b)(m({},Object(c.j)(n.state.forms,r,m({},a))),n.singleForm),Object(c.n)(m({},t),{}))})}}},{key:"deleteElement",value:function(e){var t=this,n=Object(c.g)(this.state.forms,e),r=n;if(n=Object(c.d)(n,e),this.setMyState(Object(c.b)(Object(c.j)(this.state.forms,Object(c.h)(this.formNames,e),n),this.singleForm)),"boolean"!=typeof e.never_saved){var a=e.id.replace("_"+e.name,""),s=Object(c.f)(n,a,{}),o=s.element_delete_route;"object"!==u(s.element_delete_options)&&(s.element_delete_options={});var i=!0;if(Object.keys(s.element_delete_options).map(function(t){var n=s.element_delete_options[t];o=o.replace(t,e.children[n].value),parseInt(e.children[n].value)<1&&(i=!1)}),!1===i)return;Object(l.a)(o,[],!1).then(function(a){var s=n.errors;s=s.concat(a.errors),n.errors=s,"success"===a.status?t.setMyState(Object(c.b)(Object(c.j)(t.state.forms,Object(c.h)(t.formNames,e),n),t.singleForm)):t.setMyState(Object(c.b)(Object(c.j)(t.state.forms,Object(c.h)(t.formNames,e),m({},r)),t.singleForm))}).catch(function(a){var s=(n=m({},r)).errors;s.push({class:"error",message:a}),n.errors=s,t.setMyState(Object(c.b)(Object(c.j)(t.state.forms,Object(c.h)(t.formNames,e),n),t.singleForm))})}}},{key:"addElement",value:function(e){var t=n("xk4V")(),r=m({},Object(c.m)(m({},e.prototype),t)),a=m({},Object(c.g)(this.state.forms,e)),s=Object(c.h)(this.formNames,e);if(r.children.id.value=t,"object"===u(e.children)){var o=[];Object.keys(e.children).map(function(t){o.push(m({},e.children[t]))}),e.children=o}void 0===e.children&&(e.children=[]),r.never_saved=!0,e.children.push(m({},r)),a=m({},Object(c.l)(a,e)),this.setMyState(Object(c.b)(m({},Object(c.j)(this.state.forms,s,a)),this.singleForm))}},{key:"render",value:function(){return a.a.createElement("section",null,this.state.submit?a.a.createElement("div",{className:"waitOne info"},this.functions.translate("Let me ponder your request"),"..."):"",a.a.createElement(o.a,{panels:this.panels,selectedPanel:this.state.selectedPanel,functions:this.functions,forms:this.state.forms,actionRoute:this.actionRoute,singleForm:this.singleForm,translations:this.translations,panelErrors:this.state.panelErrors}))}}])&&f(s.prototype,p),y&&f(s,y),t}();p.defaultProps={functions:{},translations:{},forms:{}};var y={};y.DepartmentEdit=n("RrZK").default,y.ThirdParty=n("Ngpf").default,y.NotificationEvent=n("nXi/").default,y.LibraryApp=n("JlTO").default;var v=y;if("undefined"!==window.CONTAINER_PROPS){var j=window.CONTAINER_PROPS;for(var O in j){var g=j[O],E=document.getElementById(g.target);if(null!==g.application&&void 0!==v[g.application]&&null!==E){var S=v[g.application];Object(s.render)(a.a.createElement(S,{content:g.content,panels:g.panels,selectedPanel:g.selectedPanel,translations:g.translations,actionRoute:g.actionRoute,forms:g.forms,extras:g.extras}),E)}else null!==E&&Object(s.render)(a.a.createElement(p,{content:g.content,panels:g.panels,selectedPanel:g.selectedPanel,actionRoute:g.actionRoute,translations:g.translations,forms:g.forms}),E)}}}},[["vSyi","runtime",0,2]]]);