(window.webpackJsonp=window.webpackJsonp||[]).push([["page"],{0:function(e,t){},"8fXb":function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),o=a("i8i4"),s=(a("pNMO"),a("4Brf"),a("0oug"),a("4mDm"),a("wLYn"),a("sMBO"),a("zKZe"),a("uL8W"),a("eoL8"),a("NBAS"),a("tkto"),a("ExoC"),a("07d7"),a("PKPk"),a("3bBZ"),a("R5XZ"),a("17x9")),l=a.n(s),i=a("TJpk");a("2B1R");function c(e){var t=e.links,a=[];return t.map((function(e,t){""===e.url?(a.push(r.a.createElement("span",{key:t},e.text)),a.push(r.a.createElement("span",{key:t+".dot"}," . "))):(a.push(r.a.createElement("a",{href:e.url,className:"link-white",key:t},e.text)),a.push(r.a.createElement("span",{key:t+".dot"}," . ")))})),a.pop(),r.a.createElement("div",{id:"minorLinks",className:"mx-auto max-w-6xl text-right text-white text-xs md:text-sm px-2 xl:px-0 mt-6"},a)}function u(e){var t=e.details,a=[];return Object.keys(t.menu).length>0&&Object.keys(t.menu).map((function(e){var n=t.menu[e],o=Object.keys(n).map((function(e){var a=n[e];return r.a.createElement("li",{className:"hover:bg-purple-700",key:e},r.a.createElement("a",{className:"block text-sm text-white focus:text-purple-200 text-left no-underline px-1 py-2 md:py-1 leading-normal",href:a.url},t.translations[a.name]))}));a.push(r.a.createElement("li",{className:"sm:relative group mt-1",key:e},r.a.createElement("a",{className:"block uppercase font-bold text-sm text-gray-800 hover:text-purple-600 no-underline px-2 py-3",href:"#"},t.translations[e]),r.a.createElement("ul",{className:"list-none bg-transparent-900 absolute hidden group-hover:block w-full sm:w-48 left-0 m-0 -mt-1 py-1 sm:p-1 z-50"},o)))})),r.a.createElement("div",{id:"headerWrapper"},r.a.createElement("div",{id:"header",className:"relative bg-white flex justify-between items-center rounded-t h-24 sm:h-32"},r.a.createElement("a",{id:"header-logo",href:t.homeURL},r.a.createElement("img",{alt:t.organisationName,src:t.organisationLogo,style:{width:"400px"}})),r.a.createElement("div",{id:"fastFinderWrapper",className:"flex-grow flex justify-end"})),r.a.createElement("nav",{id:"header-menu",className:"w-full bg-gray-200 justify-between"},r.a.createElement("ul",{className:"list-none flex flex-wrap items-center m-0 px-2 border-t border-b"},r.a.createElement("li",{className:"pl-2 mt-1",key:"home"},r.a.createElement("a",{className:"block uppercase font-bold text-sm text-gray-800 hover:text-purple-600 no-underline px-2 py-3",href:t.homeURL},t.translations.Home)),a,r.a.createElement("li",{className:"notificationTray self-end flex-grow",id:"notificationTray",key:"notificationTray"}))))}c.defaultProps={links:[]};a("TeQF");var f=a("76ZC"),m=a.n(f);function h(e){var t=e.functions,a=e.login,n=e.state.showLoginOptions?"loginOptions flex flex-col sm:flex-row justify-between content-center p-0":"loginOptions flex flex-col sm:flex-row justify-between content-center p-0 hidden",o=Object.keys(a.academicYears).map((function(e){var t=a.academicYears[e];return r.a.createElement("option",{value:t,key:t},e)})),s=Object.keys(a.languages).map((function(e){var t=a.languages[e];return r.a.createElement("option",{value:t,key:t},e)}));return r.a.createElement("div",{className:"column-no-break"},r.a.createElement("h3",null,t.translate("Login")),r.a.createElement("form",{action:"/login/",method:"post",autoComplete:"off",encType:"multipart/form-data",id:"loginForm",className:"noIntBorder fullWidth"},r.a.createElement("table",{className:"noIntBorder fullWidth relative"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:" flex flex-col sm:flex-row justify-between content-center p-0"},r.a.createElement("td",{className:"flex-grow justify-center px-2 border-b-0 sm:border-b border-t-0 "},r.a.createElement("span",{className:"fas fa-users fa-fw text-gray-600",style:{width:"20px",height:"20px",margin:"5px 0 0 2px",fontSize:"15px",display:"block"},title:t.translate("Username or email")})),r.a.createElement("td",{className:"w-full max-w-full sm:max-w-xs flex justify-end items-center px-2 border-b-0 sm:border-b border-t-0 fullWidth"},r.a.createElement("div",{className:"flex-1 relative"},r.a.createElement("input",{type:"text",id:"username",name:"username",className:"fullWidth",maxLength:"50",placeholder:t.translate("Username or email"),autoComplete:"off",style:{cursor:"auto"}})))),r.a.createElement("tr",{className:" flex flex-col sm:flex-row justify-between content-center p-0"},r.a.createElement("td",{className:"flex-grow justify-center px-2 border-b-0 sm:border-b border-t-0 "},r.a.createElement("span",{className:"fas fa-fw fa-user-lock text-gray-600",style:{width:"20px",height:"20px",margin:"5px 0 0 2px",fontSize:"15px",display:"block"},title:t.translate("Password")})),r.a.createElement("td",{className:"w-full max-w-full sm:max-w-xs flex justify-end items-center px-2 border-b-0 sm:border-b border-t-0 fullWidth"},r.a.createElement("div",{className:"flex-1 relative"},r.a.createElement("input",{type:"password",id:"password",name:"password",className:"fullWidth",maxLength:"30",placeholder:t.translate("Password"),autoComplete:"off",style:{cursor:"auto"}})))),r.a.createElement("tr",{className:n},r.a.createElement("td",{className:"flex-grow justify-center px-2 border-b-0 sm:border-b border-t-0 "},r.a.createElement("span",{className:"fa-calendar fas fa-fw text-gray-600",title:t.translate("Academic Year"),style:{width:"20px",height:"20px",margin:"5px 0 0 2px",fontSize:"15px",display:"block"}})),r.a.createElement("td",{className:"w-full max-w-full sm:max-w-xs flex justify-end items-center px-2 border-b-0 sm:border-b border-t-0 fullWidth"},r.a.createElement("div",{className:"flex-1 relative"},r.a.createElement("select",{id:"AcademicYear",name:"AcademicYear",className:"fullWidth",defaultValue:a.academicYear},o)))),r.a.createElement("tr",{className:n},r.a.createElement("td",{className:"flex-grow justify-center px-2 border-b-0 sm:border-b border-t-0 "},r.a.createElement("span",{className:"fas fa-globe fa-fw text-gray-600",title:t.translate("Language"),style:{width:"20px",height:"20px",margin:"5px 0 0 2px",fontSize:"15px",display:"block"}})),r.a.createElement("td",{className:"w-full max-w-full sm:max-w-xs flex justify-end items-center px-2 border-b-0 sm:border-b border-t-0 fullWidth"},r.a.createElement("div",{className:"flex-1 relative"},r.a.createElement("select",{id:"i18n",name:"i18n",className:"fullWidth",defaultValue:a.language},s)))),r.a.createElement("tr",{className:" flex flex-col sm:flex-row justify-between content-center p-0"},r.a.createElement("td",{className:"flex-grow justify-center px-2 border-b-0 sm:border-b border-t-0 right",colSpan:"2"},r.a.createElement("a",{className:"show_hide",onClick:function(){return t.showHideLogin()},href:"#"},t.translate("Options"))," . ",r.a.createElement("a",{href:a.resetPasswordURL},t.translate("Forgot Password"),"?"))),r.a.createElement("tr",{className:" flex flex-col sm:flex-row justify-between content-center p-0"},r.a.createElement("td",{className:"w-full max-w-full sm:max-w-xs flex justify-end items-center px-2 border-b-0 sm:border-b border-t-0 right",colSpan:"2"},r.a.createElement("input",{type:"submit",value:"Login"})))))))}function d(e){var t=e.functions,a=e.login,n=e.state;if(!a.on)return"";var o=n.showGoogleOptions?"loginOptions flex flex-col sm:flex-row justify-between content-center p-0":"loginOptions flex flex-col sm:flex-row justify-between content-center p-0 hidden",s=Object.keys(a.academicYears).map((function(e){var t=a.academicYears[e];return r.a.createElement("option",{value:t,key:t},e)})),l=Object.keys(a.languages).map((function(e){var t=a.languages[e];return r.a.createElement("option",{value:t,key:t},e)}));return r.a.createElement("div",{className:"column-no-break"},r.a.createElement("h3",null,t.translate("Login with Google")),r.a.createElement("div",{style:{backgroundColor:"#edf7ff"}},r.a.createElement("form",{action:"#",method:"post",autoComplete:"on",encType:"multipart/form-data",className:"blank fullWidth loginTableGoogle",id:"loginFormGoogle"},r.a.createElement("table",{className:"noIntBorder fullWidth loginTableGoogle relative",cellSpacing:"0"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"flex flex-col sm:flex-row justify-between content-center p-0"},r.a.createElement("td",{className:"w-full max-w-full sm:max-w-xs flex justify-end items-center px-2 border-b-0 sm:border-b border-t-0 fullWidth",colSpan:"2"},r.a.createElement("button",{id:"googleConnect",type:"button",className:"w-full bg-white rounded shadow border border-gray-400 flex items-center px-2 py-1 mb-2 text-gray-600 hover:shadow-md hover:border-blue-600 hover:text-blue-600",onClick:function(){return t.googleOAuth()}},r.a.createElement("img",{className:"w-10 h-10",src:a.login_img}),r.a.createElement("span",{className:"flex-grow text-lg"},t.translate("Login with Google"))))),r.a.createElement("tr",{className:o},r.a.createElement("td",{className:"flex-grow justify-center px-2 border-b-0 sm:border-b border-t-0 "},r.a.createElement("span",{className:"fa-calendar fas fa-fw text-gray-600",title:t.translate("Academic Year"),style:{width:"20px",height:"20px",margin:"5px 0 0 2px",fontSize:"15px",display:"block"}})),r.a.createElement("td",{className:"w-full max-w-full sm:max-w-xs flex justify-end items-center px-2 border-b-0 sm:border-b border-t-0 fullWidth"},r.a.createElement("div",{className:"flex-1 relative"},r.a.createElement("select",{id:"googleAcademicYear",name:"AcademicYear",className:"fullWidth",defaultValue:a.academicYear},s)))),r.a.createElement("tr",{className:o},r.a.createElement("td",{className:"flex-grow justify-center px-2 border-b-0 sm:border-b border-t-0 "},r.a.createElement("span",{className:"fas fa-globe fa-fw text-gray-600",style:{width:"20px",height:"20px",margin:"5px 0 0 2px",fontSize:"15px",display:"block"},title:t.translate("Language")})),r.a.createElement("td",{className:"w-full max-w-full sm:max-w-xs flex justify-end items-center px-2 border-b-0 sm:border-b border-t-0 fullWidth"},r.a.createElement("div",{className:"flex-1 relative"},r.a.createElement("select",{id:"googleI18n",name:"i18n",className:"fullWidth",defaultValue:a.language},l)))),r.a.createElement("tr",null,r.a.createElement("td",{className:" px-2 border-b-0 sm:border-b border-t-0 right",colSpan:"2"},r.a.createElement("a",{className:"showGoogleOptions",onClick:function(){return t.showHideGoogle()}},t.translate("Options")))))))))}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=b(t).call(this,e))||"object"!==p(r)&&"function"!=typeof r?y(n):r).login=e.login,a.googleOAuth=e.googleOAuth,a.googleOAuth.academicYears=a.login.academicYears,a.googleOAuth.academicYear=a.login.academicYear,a.googleOAuth.languages=a.login.languages,a.googleOAuth.language=a.login.language,a.translations=e.translations,a.state={showLoginOptions:!1,showGoogleOptions:!1},a.functions={translate:a.translate.bind(y(a)),showHideLogin:a.showHideLogin.bind(y(a)),showHideGoogle:a.showHideGoogle.bind(y(a)),googleOAuth:a.googleOAuthLogin.bind(y(a))},a}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),a=t,(n=[{key:"showHideLogin",value:function(){this.setState({showLoginOptions:!this.state.showLoginOptions})}},{key:"showHideGoogle",value:function(){this.setState({showGoogleOptions:!this.state.showGoogleOptions})}},{key:"googleOAuthLogin",value:function(){var e=this.googleOAuth.googleOAuthURL;this.state.showGoogleOptions?e=e+"?state="+document.getElementById("googleAcademicYear").value+":"+document.getElementById("googleI18n").value:e+="?state=0:0",window.open(e,"_self")}},{key:"translate",value:function(e){return void 0===this.translations[e]?(console.error("No translations for "+e),e):this.translations[e]}},{key:"getLoginContent",value:function(){var e=[];return e.push(r.a.createElement(d,{login:this.googleOAuth,state:this.state,functions:this.functions,key:"google"})),e.push(r.a.createElement(h,{login:this.login,functions:this.functions,state:this.state,key:"login"})),e}},{key:"render",value:function(){return this.getLoginContent()}}])&&g(a.prototype,n),o&&g(a,o),t}(n.Component);function E(e){var t=e.items.map((function(e,t){return r.a.createElement("li",{className:"p-0 leading-normal lg:leading-tight",key:t},r.a.createElement("a",{href:e.url,className:e.active?"active":""},e.name))}));return r.a.createElement("ul",{className:"list-none m-0 mb-6"},t)}function w(e){var t=e.data;return r.a.createElement("nav",{id:"navigation"},Object.keys(t).map((function(e){var a=t[e][0].category;return r.a.createElement("ul",{key:e,className:"",style:{maxWidth:"14rem",display:"flex"}},r.a.createElement("li",{className:"column-no-break p-0 "},r.a.createElement("h5",{className:"m-0 mb-1 text-xs pb-0 "},a),r.a.createElement(E,{items:t[e]})))})))}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e){var t=e.content,a=e.sidebarContentAttr,n=(e.functions,e.height,e.sidebarOpen,[]);return Object.keys(t).map((function(e){var a=t[e];if("Login"===a.name)n.push(r.a.createElement(x,{login:a.login,googleOAuth:a.googleOAuth,translations:a.translations,key:"Login"}));else if("Module Menu"===a.name)n.push(r.a.createElement(w,{data:a.data,key:"Module Menu"}));else if("Module Menu"!==a.name&&""!==a.content){var o=m()(a.content);if("object"===k(o._owner))return void n.push(r.a.createElement("div",{className:"column-no-break",key:a.name},"x"));var s=o.filter((function(e){if("object"===k(e))return e}));n.push(r.a.createElement("div",{className:"column-no-break",key:a.name},s))}})),r.a.createElement("div",a,n)}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function O(e){var t=e.content,a=e.state,n=e.functions;return r.a.createElement("div",null,r.a.createElement("button",N({},a.buttonAttr,{onClick:function(){return n.onSetSidebarOpen("open")}}),r.a.createElement("span",{className:"fas fa-bars fa-fw fa-2x"})),r.a.createElement(C,N({content:t,functions:n},a)))}function S(e){var t=e.content,a=(e.minimised,e.width),n=e.functions,o=e.sidebarOpen,s=e.height;var l=function(){var e={};(e={sidebarOpen:o,screenWidth:a,height:s,content:t}).sidebarAttr={id:"sidebar",style:{width:"250px"},className:"absolute top-0 right-0 float-right px-6 pb-6 pt-0"},o&&(e.sidebarAttr.className+=" lg:border-l"),e.sidebarContentAttr={id:"sideBarContent"};var n=e.sidebarOpen;return e.buttonAttr={className:"text-gray-600 absolute top-0 right-0",id:"sideBarButton"},n?e.buttonAttr.className="hidden":(e.sidebarContentAttr.className="invisible",e.sidebarAttr.style={width:"35px",height:"35px"}),e}();return r.a.createElement("div",l.sidebarAttr,r.a.createElement(O,{state:l,functions:n}))}O.defaultProps={content:{}};var j=a("d9xl");function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function _(e){var t,a,n=e.contentWidth,o=e.contentHeight,s=e.sidebar,l=e.functions,i=e.content,c=e.sidebarOpen,u=e.pagination,f=e.breadCrumbs,m=function(e){e.contentAttr={id:"content",className:"px-6 pb-6 pt-0 float-left"};var t=!1;e.docked&&""===e.sidebarOpen&&(t=!0);!e.minimised&&e.width>975&&(t=!0);"open"===e.sidebarOpen&&(t=!0);e.minimised&&""===e.sidebarOpen&&(t=!1);void 0!==e.content?e.contentAttr.style={width:e.width-250+"px",minHeight:24+e.height+"px"}:e.contentAttr={id:"content",key:"content",className:"w-full px-6 pb-6 pt-0 float-left",style:{minHeight:24+e.height+"px"}};t?(e.contentAttr.style={width:e.width-250+"px",minHeight:24+e.height+"px"},e.width<959&&(e.contentAttr.style={width:e.width-226+"px",minHeight:24+e.height+"px"})):e.contentAttr={className:"w-full px-6 pb-6 pt-0 float-left"};return e.sidebarOpen=t,e}({height:o,width:n,sidebarOpen:c,content:void 0!==s.content?s.content:{},docked:"boolean"==typeof s.docked&&s.docked,minimised:"boolean"==typeof s.minimised&&s.minimised});return t=[],a=[],f.map((function(e){a.push(e)})),i.map((function(e){a.push(e)})),Object.keys(u).length>0&&a.push(r.a.createElement(j.a,P({},u,{key:u.name}))),t.push(r.a.createElement(S,P({key:"sidebar",functions:l},m))),t.push(r.a.createElement("div",P({},m.contentAttr,{key:"content"}),a)),t}function L(e){var t=e.details;return r.a.createElement("div",{className:"relative bg-transparent-600 text-white text-center text-sm p-6 mb-10 leading-normal rounded-b"},r.a.createElement("span",{className:"inline-block"},t.translations["Powered by"]," ",r.a.createElement("a",{className:"link-white",target:"_blank",href:"http://www.craigrayner.com/kookaburra"},t.translations.Kookaburra)," "),r.a.createElement("span",{className:"inline-block"},"|  © ",r.a.createElement("a",{className:"link-white",target:"_blank",href:"http://www.craigrayner.com"},"Craig Rayner")," 2019-",t.year),r.a.createElement("br",null),r.a.createElement("span",{className:"text-xs"},t.translations["Created under the"]," ",r.a.createElement("a",{className:"link-white",target:"_blank",href:"https://opensource.org/licenses/MIT"},"MIT")," ",t.translations.licence,",",t.translations["from a fork of"]," ",r.a.createElement("a",{className:"link-white",target:"_blank",href:"https://gibbonedu.org"},"Gibbon v18.0.00"),r.a.createElement("br",null),t.footerThemeAuthor,r.a.createElement("br",null)),r.a.createElement("img",{src:t.footerLogo,className:"absolute right-0 top-0 -mt-2 sm:mr-0 md:mr-12 opacity-75 hidden sm:block"}))}_.propTypes={sidebarOpen:l.a.string.isRequired,contentWidth:l.a.number.isRequired,contentHeight:l.a.number.isRequired,content:l.a.array.isRequired,breadCrumbs:l.a.array.isRequired,sidebar:l.a.object.isRequired,pagination:l.a.oneOfType([l.a.object,l.a.array]).isRequired},_.defaultProps={action:{},pagination:{},content:[],breadCrumbs:[]};var A=a("J5mc");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function M(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(o=R(t).call(this,e))||"object"!==T(o)&&"function"!=typeof o?W(n):o).locale=e.locale,a.rtl=e.rtl,a.bodyImage=e.bodyImage,a.headerDetails=e.headerDetails,a.action=e.action,a.module=e.module,a.url=e.url,a.route=e.route,a.footer=e.footer,a.minorLinks=e.minorLinks,a.height=0,a.references={sideBarContentRef:r.a.createRef("sideBarContent")},a.functions={getContent:a.getContentFromServer.bind(W(a)),onSetSidebarOpen:a.onSetSidebarOpen.bind(W(a)),getContentSize:a.getContentSize.bind(W(a))},a.onSetSidebarOpen=a.onSetSidebarOpen.bind(W(a)),a.handleClickOffSidebar=a.handleClickOffSidebar.bind(W(a)),a.state={contentWidth:0,content:[],sidebar:{},sidebarOpen:"",contentHeight:0},a}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){this.getContentFromServer(),window.addEventListener("resize",this.functions.getContentSize,!1),document.addEventListener("mousedown",this.handleClickOffSidebar,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.functions.getContentSize,!1),document.removeEventListener("mousedown",this.handleClickOffSideBar,!1)}},{key:"getContentSize",value:function(){var e=document.getElementById("content-wrap");e=e?e.offsetWidth:0;for(var t=document.getElementById("sideBarContent"),a=t?t.offsetHeight+42:0,n=0;a>800&&n<10;)a=t?t.offsetHeight+42:0,n++;this.setState({contentWidth:e,contentHeight:a})}},{key:"getTitle",value:function(){var e=this.headerDetails.translations.Kookaburra;return this.headerDetails.organisationName.length>0&&(e+=" - "+this.headerDetails.organisationName,Object.keys(this.action).length>0&&(e+=" - "+this.action.name)),e}},{key:"setNode",value:function(e){this.node=e}},{key:"onSetSidebarOpen",value:function(e){this.setState({sidebarOpen:e}),setTimeout(this.functions.getContentSize,100)}},{key:"handleClickOffSidebar",value:function(e){var t=document.getElementById("sidebar");t&&t.contains(e.target)||e.target.classList.contains("ignore-mouse-down")||e.target.classList.contains("fa-fw")||this.setState({sidebarOpen:"closed"})}},{key:"getContent",value:function(){var e=this,t=[];return t.push(r.a.createElement(i.Helmet,{key:"helmet"},r.a.createElement("title",null,this.getTitle()),r.a.createElement("meta",{"http-equiv":"content-language",content:this.locale}),this.rtl?r.a.createElement("head",{dir:"rtl"}):r.a.createElement("head",null),r.a.createElement("body",{style:"background: url('"+this.bodyImage+"') repeat fixed center top olivedrab!important"}))),t.push(r.a.createElement(c,{links:this.minorLinks,key:"minorLinks"})),t.push(r.a.createElement("div",{id:"wrap",className:"max-w-6xl mx-auto m-2 shadow rounded",key:"wrap"},r.a.createElement(u,{details:this.headerDetails}),r.a.createElement("div",{id:"content-wrap",ref:function(t){return e.contentRef=t},className:"relative w-full block content-start flex-wrap lg:flex-no-wrap lg:flex-row-reverse bg-transparent-100 clearfix"},r.a.createElement(_,F({action:this.action,url:this.url,functions:this.functions},this.state,{references:this.references}))),r.a.createElement(L,{details:this.footer}))),t}},{key:"getContentFromServer",value:function(){var e=this;Object(A.a)(this.url,[],!1).then((function(t){e.setState({content:m()(t.content),pagination:t.pagination,sidebar:t.sidebar,breadCrumbs:m()(t.breadCrumbs)}),setTimeout(e.functions.getContentSize,50)}))}},{key:"render",value:function(){return this.state.height!==this.height&&(this.height=this.state.height,setTimeout(this.functions.getContentSize,50)),this.getContent()}}])&&M(a.prototype,n),o&&M(a,o),t}(n.Component);D.defaultProps={locale:"en_GB",rtl:!1,action:{},module:{},sidebar:{},minimised:!0};var B=document.getElementById("wrapOuter");Object(o.render)(r.a.createElement(D,window.PAGE_PROPS),B)},J5mc:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("yq1k"),a("zKZe"),a("07d7"),a("5s+n"),a("JTJg");function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function r(e,t,a){var r={};t&&t.headers&&(r=t.headers,delete t.headers),r=n({},r,{"Content-Type":"application/json; charset=utf-8"}),null===a&&(a="en_GB"),!1!==a&&""!==e||(a="");var s=window.location.protocol+"//"+window.location.hostname+"/";return"/"===e[0]&&(e=e.substring(1)),"http"===e.substring(0,4)&&(s=""),fetch(s+a+e,n({},t,{credentials:"same-origin",headers:r})).then(o).then((function(e){return e.text().then((function(e){return e.includes("window.Sfdump")?(console.log(e),""):"string"==typeof e?JSON.parse(e):""}))}))}function o(e){if(e.status>=200&&e.status<400)return e;var t=new Error(e.statusText);throw t.response=e,t}},d9xl:function(e,t,a){"use strict";a("pNMO"),a("4Brf"),a("0oug"),a("TeQF"),a("yq1k"),a("4mDm"),a("2B1R"),a("+2oP"),a("ToJy"),a("wLYn"),a("sMBO"),a("zKZe"),a("uL8W"),a("eoL8"),a("NBAS"),a("tkto"),a("ExoC"),a("07d7"),a("rB9j"),a("JTJg"),a("PKPk"),a("UxlC"),a("hByQ"),a("3bBZ");var n=a("q1tI"),r=a.n(n);a("17x9");function o(e){var t=e.row,a=e.sortColumn,n=e.sortColumnName,o=e.sortColumnDirection,s=[];return Object.keys(t.columns).map((function(e){var l=t.columns[e];if(!l.dataOnly){var i=null!==l.help?r.a.createElement("span",{className:"small text-gray-600 italic"},r.a.createElement("br",null),l.help):"",c=!0===l.sort?r.a.createElement("span",{className:"fas fa-sort fa-fw text-gray-600",style:{float:"right"}}):"",u=n;"array"==typeof n&&(u=n[0]),u===l.contentKey&&(c=r.a.createElement("span",{className:"fas fa-sort-"+o+" fa-fw text-gray-800",style:{float:"right"}}));var f=""!==l.headerClass?l.headerClass:l.class;s.push(r.a.createElement("th",{className:f,key:e,onClick:function(){return a(l.contentKey)}},c,l.label,i))}})),t.actions.length>0&&s.push(r.a.createElement("th",{className:"column width1",key:"actions"},t.actionTitle)),r.a.createElement("tr",{className:"head text-xs"},s)}var s=a("zsrT"),l=a.n(s),i=(a("mRH6"),a("A3CJ")),c=a.n(i),u=a("fhwx"),f=a.n(u);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){var t=e.row,a=e.content,n=e.functions,o=e.draggableSort;if(0===a.length)return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:t.columns.length+1},r.a.createElement("div",{className:"h-48 rounded-sm border bg-gray-100 shadow-inner overflow-hidden"},r.a.createElement("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-600 text-lg"},t.emptyContent)))));var s=Object.keys(a).map((function(e){var s=a[e],l=[];Object.keys(t.columns).map((function(e){var a=t.columns[e];if(!a.dataOnly){var n=[];if("object"===m(a.contentKey))if("image"===a.contentType){var o=void 0===a.options.style?{}:a.options.style,i=void 0===a.options.class?"":a.options.class;a.contentKey.map((function(e,t){0===t&&n.push(r.a.createElement(c.a,{src:s[e],style:o,className:i,key:t}))}))}else if("link"===a.contentType){var u=void 0===a.options.link?"#":a.options.link,h=void 0===a.options.title?"":a.options.title,d=void 0===a.options.style?{}:a.options.style,p=void 0===a.options.class?"":a.options.class;"object"===m(a.options.route_options)&&Object.keys(a.options.route_options).map((function(e){var t=a.options.route_options[e];u=u.replace("__"+t+"__",s[t])})),a.contentKey.map((function(e,t){0===t&&(""===p?n.push(r.a.createElement("a",{href:u,title:h,style:d,key:t},f()(s[e]))):n.push(r.a.createElement("a",{href:u,title:h,className:p,style:d,key:t},f()(s[e]))))}))}else a.contentKey.map((function(e,t){t>0?n.push(r.a.createElement("span",{key:t,className:"small text-gray-600 italic"},r.a.createElement("br",null),f()(s[e]))):n.push(r.a.createElement("span",{key:t},f()(s[e])))}));else n=[s[a.contentKey]];l.push(r.a.createElement("td",{key:e,className:a.class},n))}}));var i=Object.keys(t.actions).map((function(e){var a=t.actions[e];if(""===a.displayWhen||s[a.displayWhen])return""===a.onClick?r.a.createElement("a",{href:s.actions[e],className:a.aClass,key:e,title:a.title},r.a.createElement("span",{className:a.spanClass})):r.a.createElement("a",{onClick:function(){return n[a.onClick](s.actions[e],s)},className:a.aClass,key:e,title:a.title},r.a.createElement("span",{className:a.spanClass}))}));return t.actions.length>0&&l.push(r.a.createElement("td",{key:"actions"},r.a.createElement("div",{className:"group-hover:flex sm:flex"},i))),void 0===s.id&&console.error('You must define an "id" in your pagination array.'),o?r.a.createElement("tr",{className:i.columnClass,key:e,id:"pagination"+s.id,draggable:"true",onDragStart:function(e){return function(e){e.dataTransfer.setData("text",e.target.id)}(e)},onDragOver:function(e){return function(e){e.preventDefault()}(e)},onDragEnter:function(e){return d(e,!0)},onDragLeave:function(e){return d(e,!1)}},l):r.a.createElement("tr",{className:i.columnClass,key:e,id:"pagination"+s.id},l)}));return o?r.a.createElement("tbody",{onDrop:function(e){return function(e){return e.target.parentNode.classList.remove("dropTarget"),document.getElementById(e.dataTransfer.getData("text")).classList.remove("dropTarget"),n.dropEvent(e)}(e)}},s):r.a.createElement("tbody",null,s)}function d(e,t){e.preventDefault(),t&&e.target.parentNode.classList.contains("dropTarget")||(t||e.target.parentNode.classList.contains("dropTarget"))&&e.target.parentNode.classList.toggle("dropTarget")}function p(e){var t=e.changeFilter,a=e.filters,n=(e.filter,e.filterGroups),o=e.messages,s=e.defaultFilters;if(0===Object.keys(a).length)return r.a.createElement("tr",{style:{display:"none"}});var l=[];Object.keys(a).map((function(e){var t=a[e];l.includes(t.group)||l.push(t.group)}));var i=[];l.map((function(e){var t=Object.keys(a).filter((function(t){var n=a[t];if(e===n.group)return n})).map((function(e){var t=a[e];return r.a.createElement("option",{value:t.name,key:e},t.label)}));i.push(r.a.createElement("optgroup",{key:e,label:e},t))})),i.unshift(r.a.createElement("option",{value:"",key:0},o.Filter));var c=[];return n!=={}&&(c=Object.keys(n).map((function(e){var o=n[e],s=a[o];return r.a.createElement("span",{onClick:function(){return t(s)},className:"primary button-like pointer-hover",key:e},o," ",r.a.createElement("span",{className:"far fa-times-circle fa-fw"}))}))),r.a.createElement("tr",{className:"flex flex-col sm:flex-row justify-between content-center p-0"},r.a.createElement("td",{className:"flex flex-col flex-grow justify-center -mb-1 sm:mb-0 px-2 border-b-0 sm:border-b border-t-0"},r.a.createElement("label",{htmlFor:"manage_search_search"},o["Filter Select"],s?r.a.createElement("span",{className:"text-xxs text-gray-600 italic font-normal mt-1 sm:mt-0"},r.a.createElement("br",null),o["Default filtering is enforced."]):""),r.a.createElement("div",{style:{marginTop:"7px",height:"20px"}},c)),r.a.createElement("td",{className:"w-full max-w-full sm:max-w-xs flex justify-end items-center px-2 border-b-0 sm:border-b border-t-0"},r.a.createElement("div",{className:"flex-1 relative"},r.a.createElement("select",{id:"filter_select",onChange:function(e){return t(e)},value:"",className:"w-full"},i))))}function g(e){var t=e.search,a=e.changeSearch,n=e.clearSearch,o=e.messages,s=e.searchValue;return t?r.a.createElement("tr",{className:"flex flex-col sm:flex-row justify-between content-center p-0"},r.a.createElement("td",{className:"flex flex-col flex-grow justify-center -mb-1 sm:mb-0 px-2 border-b-0 sm:border-b border-t-0"},r.a.createElement("label",{htmlFor:"search_input"},o["Search for"]),r.a.createElement("span",{id:"manage_search_search_help",className:"text-xxs text-gray-600 italic font-normal mt-1 sm:mt-0 help-text"},o["Search in"])),r.a.createElement("td",{className:"w-full max-w-full sm:max-w-xs flex justify-end items-center px-2 border-b-0 sm:border-b border-t-0"},r.a.createElement("div",{className:"flex-1 relative"},r.a.createElement("input",{type:"text",id:"search_input",onChange:function(e){return a(e)},value:s,className:"w-full"}),r.a.createElement("div",{className:"button-right"},r.a.createElement("button",{type:"button",title:o.Clear,onClick:function(){return n()},className:"button"},r.a.createElement("span",{className:"fa-fw fas fa-broom"})))))):r.a.createElement("tr",{style:{display:"none"}})}function b(e){var t=e.messages,a=e.doit,n=e.cancel,o="overlay";return e.confirm&&(o="overlay target"),r.a.createElement("div",{id:"areYouSure",className:o},r.a.createElement("div",{className:"popup"},r.a.createElement("h3",null,t["Are you sure you want to delete this record?"]),r.a.createElement("a",{className:"close",onClick:function(){return n()},title:t.Close},r.a.createElement("span",{className:"far fa-times-circle fa-fw"})),r.a.createElement("div",{className:"content"},r.a.createElement("p",{style:{color:"#cc0000"}},t["This operation cannot be undone, and may lead to loss of vital data in your system. PROCEED WITH CAUTION!"]),r.a.createElement("button",{type:"button",className:"button btn-gibbon",style:{color:"white",float:"right"},onClick:function(){return a()}},t.Yes))))}function y(e){var t=e.messages,a=e.cancel,n=e.information;if(!1===n)return r.a.createElement("div",{id:"informationDisplay",className:"overlay"},r.a.createElement("div",{className:"popup"}));for(var o=n.header;o.length>62;)o=o.slice(1);return r.a.createElement("div",{id:"informationDisplay",className:"overlay target"},r.a.createElement("div",{className:"popup"},r.a.createElement("a",{className:"close",onClick:function(){return a()},title:t.Close},r.a.createElement("span",{className:"far fa-times-circle fa-fw"})),r.a.createElement("h3",null,o),r.a.createElement("div",{className:"content"},f()(n.content))))}var v=a("J5mc");a("yXV3"),a("pDQq"),a("DQNa"),a("JfAA"),a("R5XZ");function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){var t=e.message,a=e.cancelMessage,n=e.translate;return"string"==typeof t.message?r.a.createElement("div",{className:t.class},f()(t.message),t.close?r.a.createElement("button",{className:"button close "+t.class,onClick:function(){return a(t.id)},title:n("Close Message"),type:"button"},r.a.createElement("span",{className:"fas fa-times-circle fa-fw "+t.class})):""):"object"===E(t.message)?r.a.createElement("div",{className:t.class},f()(t.message.message),r.a.createElement("br",null),r.a.createElement("span",{className:"small"},f()(t.message.stack)),t.close?r.a.createElement("button",{className:"button close "+t.class,onClick:function(){return a(t.id)},title:n("Close Message"),type:"button"},r.a.createElement("span",{className:"fas fa-times-circle fa-fw "+t.class})):""):(console.log("message.message is a "+E(t.message)),console.log(t),null)}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function N(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=O(t).call(this,e))||"object"!==k(r)&&"function"!=typeof r?S(n):r).translate=e.translate,a.cancelMessage=a.cancelMessage.bind(S(a)),a}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e),a=t,(n=[{key:"cancelMessage",value:function(e){var t=this.props.messages;t.splice(e,1),this.setState({messages:t})}},{key:"render",value:function(){var e=this,t=Object.keys(this.props.messages).map((function(t){var a=e.props.messages[t];if(void 0===a.close&&(a.close=!0),void 0===a)return"";if("string"==typeof a){var n={};n.message=a,n.class="error",n.id=t,a=C({},n)}return a.id=t,r.a.createElement(w,{message:a,translate:e.translate,close:a.close,key:"message_"+a.id,cancelMessage:e.cancelMessage})}));return 0===t.length?null:r.a.createElement("div",null,t)}}])&&N(a.prototype,n),o&&N(a,o),t}(n.Component);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}a.d(t,"a",(function(){return R}));var R=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=T(t).call(this,e))||"object"!==L(r)&&"function"!=typeof r?F(n):r).pageMax=e.pageMax,a.row=e.row,a.content=e.content,a.filters=e.row.filters,a.messages=e.translations,a.search=e.row.search,a.filterGroups=e.row.filterGroups,a.contentLoader=e.contentLoader,a.defaultFilter=e.row.defaultFilter,a.initialFilter=e.initialFilter,a.initialSearch=e.initialSearch,a.addElementRoute=e.addElementRoute,a.draggableSort=e.draggableSort,a.columnCount=0,a.storeFilterURL=e.storeFilterURL,a.draggableRoute=e.draggableRoute,a.storeFilterWait=!1,a.sortColumn=a.sortColumn.bind(F(a)),a.firstPage=a.firstPage.bind(F(a)),a.lastPage=a.lastPage.bind(F(a)),a.prevPage=a.prevPage.bind(F(a)),a.nextPage=a.nextPage.bind(F(a)),a.deleteItem=a.deleteItem.bind(F(a)),a.closeConfirm=a.closeConfirm.bind(F(a)),a.adjustPageSize=a.adjustPageSize.bind(F(a)),a.changeFilter=a.changeFilter.bind(F(a)),a.changeSearch=a.changeSearch.bind(F(a)),a.clearSearch=a.clearSearch.bind(F(a)),a.translate=a.translate.bind(F(a)),a.handleAddClick=a.handleAddClick.bind(F(a)),a.functions={areYouSure:a.areYouSure.bind(F(a)),displayInformation:a.displayInformation.bind(F(a)),dropEvent:a.dropEvent.bind(F(a))},a.path="",a.state={sortColumn:"",sortDirection:"",results:[],offset:0,pageMax:a.pageMax,confirm:!1,information:!1,filteredContent:a.content,filter:[],filterGroups:{},search:"",messages:[]},a}var a,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){var e=this;if(this.columnCount=0,this.row.columns.map((function(t){!1===t.dataOnly&&(e.columnCount=e.columnCount+1)})),this.row.actions.length>0&&(this.columnCount=this.columnCount+1),!1!==this.contentLoader&&(this.row.emptyContent=this.messages["Loading Content..."],this.loadContent()),this.changeFilter(null),this.draggableSort){var t={class:"info",message:"Items rows can be dragged into the correct position.",close:!1};this.setState({messages:[t]})}if(this.setInitialFilter(),""!==this.initialSearch){var a={target:{}};a.target.value=this.initialSearch,this.changeSearch(a)}}},{key:"translate",value:function(e){return function(e,t){return void 0===(a=e[t])||""===a||null===a||a===[]||a==={}?(console.error("Unable to translate: "+t),t):e[t];var a}(this.messages,e)}},{key:"setInitialFilter",value:function(){var e=this;this.initialFilter.length>0&&this.initialFilter.map((function(t){var a={target:{}};a.target.value=t,e.changeFilter(a)}))}},{key:"loadContent",value:function(){var e=this;Object(v.a)(this.contentLoader,{},!1).then((function(t){if("success"===t.status){e.content=t.content,e.pageMax=t.pageMax;var a=e.paginateContent(e.content,0,e.pageMax);e.row.emptyContent=e.messages["There are no records to display."],e.setState({results:a})}else e.setState({information:t.message})})).catch((function(t){console.error(t),e.setState({information:t})}))}},{key:"areYouSure",value:function(e,t){this.path=e,this.setState({confirm:!0})}},{key:"displayInformation",value:function(e,t){var a=this;this.path=e,this.setState({information:{header:this.translate("Loading")+"...",content:""}}),Object(v.a)(e,{},!1).then((function(e){a.setState({information:e})}))}},{key:"deleteItem",value:function(e){this.setState({confirm:!1}),window.open(e,"_self")}},{key:"closeConfirm",value:function(){this.path="",this.setState({confirm:!1,information:!1})}},{key:"dropEvent",value:function(e){var t=this;e.preventDefault();var a=e.dataTransfer.getData("text").replace("pagination",""),n=e.target.parentNode.id.replace("pagination",""),r=this.draggableRoute.replace("__source__",a).replace("__target__",n);Object(v.a)(r,{},!1).then((function(e){var a=t.state.messages;if(e.errors.map((function(e){a.push(e)})),"success"===e.status){t.content=e.content;var n=t.paginateContent(t.content,0,t.state.pageMax);t.setState({results:n,messages:a})}else"error"===e.status&&t.setState({messages:a})}))}},{key:"sortColumn",value:function(e){var t=this,a={};if(Object.keys(this.row.columns).filter((function(n){t.row.columns[n].contentKey===e&&(a=t.row.columns[n])})),!0===a.sort){var n=this.state.sortDirection;"object"===L(e)&&(e=e[0]),n=e===this.state.sortColumn&&"down"===n?"up":"down";var r=this.paginateContent(this.sortContent(e,n,this.state.filteredContent),this.state.offset);this.setState({sortColumn:e,sortDirection:n,results:r,control:this.buildControl(this.state.offset,r)})}}},{key:"sortContent",value:function(e,t,a){return""===e&&(e=this.state.sortColumn,t=this.state.sortDirection),""===e?a:a.sort(l()(e,"up"===t?-1:1))}},{key:"paginateContent",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return 0===a&&(a=this.state.pageMax),e.slice(t,t+a)}},{key:"firstPage",value:function(){this.checkOffset(this.state.filteredContent,0)}},{key:"prevPage",value:function(){this.checkOffset(this.state.filteredContent,this.state.offset-this.state.pageMax)}},{key:"nextPage",value:function(){this.checkOffset(this.state.filteredContent,this.state.offset+this.state.pageMax)}},{key:"lastPage",value:function(){for(var e=this.state.offset;e<=this.state.filteredContent.length;)e+=this.state.pageMax;this.checkOffset(this.state.filteredContent,e,this.state.pageMax)}},{key:"handleAddClick",value:function(e,t,a){e.preventDefault(),function(e,t){void 0===t&&(t="_blank");var a="";"object"===x(e)&&(e=(a=e).url,t=a.target,a=void 0!==a.options?a.options:""),window.open(e,t,a)}(t,a)}},{key:"checkOffset",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(0===a&&(a=this.state.pageMax);t>e.length;)t-=a;a>=e.length&&(t=0),t<0&&(t=0);var n=this.paginateContent(this.sortContent("","",e),t,a);this.setState({offset:t,results:n,pageMax:a,sizeButtons:this.buildPageSizeControls(a),filteredContent:e})}},{key:"adjustPageSize",value:function(e){"All"===e&&(e=this.state.filteredContent.length),this.checkOffset(this.state.filteredContent,this.state.offset,e)}},{key:"buildPageSizeControls",value:function(){var e=this,t=[];return this.state.filteredContent.length>10&&(t.push(r.a.createElement("a",{href:"#",key:"10",onClick:function(){return e.adjustPageSize(10)},className:10===this.state.pageMax?"text-blue-600":"text-gray-600"},"10")),t.push(r.a.createElement("a",{href:"#",key:"25",onClick:function(){return e.adjustPageSize(25)},className:25===this.state.pageMax?"text-blue-600":"text-gray-600"},",25"))),this.state.filteredContent.length>25&&t.push(r.a.createElement("a",{href:"#",key:"50",onClick:function(){return e.adjustPageSize(50)},className:50===this.state.pageMax?"text-blue-600":"text-gray-600"},",50")),this.state.filteredContent.length>50&&t.push(r.a.createElement("a",{href:"#",key:"100",onClick:function(){return e.adjustPageSize(100)},className:100===this.state.pageMax?"text-blue-600":"text-gray-600"},",100")),this.state.filteredContent.length>100&&t.push(r.a.createElement("a",{href:"#",key:"All",onClick:function(){return e.adjustPageSize("All")},className:this.state.pageMax===this.state.filteredContent.length?"text-blue-600":"text-gray-600"},",",this.messages.All)),t}},{key:"buildControl",value:function(){var e=this,t=[];if(this.state.filteredContent.length>0){var a=this.row.caption.replace("{start}",this.state.offset+1);a=(a=a.replace("{end}",this.state.results.length+this.state.offset)).replace("{total}",this.state.filteredContent.length),this.state.offset>0&&t.push(r.a.createElement("a",{href:"#",key:"first",onClick:function(){return e.firstPage()},title:this.row.firstPage},r.a.createElement("span",{className:"text-gray-600 fas fa-angle-double-left fa-fw"}))),this.state.filteredContent.length>this.state.pageMax&&this.state.offset>0&&t.push(r.a.createElement("a",{href:"#",key:"prev",onClick:function(){return e.prevPage()},title:this.row.prevPage},r.a.createElement("span",{className:"text-gray-600 fas fa-angle-left fa-fw"}))),t.push(r.a.createElement("span",{key:"content"},a)),this.state.filteredContent.length>this.state.pageMax&&this.state.pageMax+this.state.offset<this.state.filteredContent.length&&(t.push(r.a.createElement("a",{href:"#",key:"next",onClick:function(){return e.nextPage()},title:this.row.nextPage},r.a.createElement("span",{className:"text-gray-600 fas fa-angle-right fa-fw"}))),t.push(r.a.createElement("a",{href:"#",key:"last",onClick:function(){return e.lastPage()},title:this.row.lastPage},r.a.createElement("span",{className:"text-gray-600 fas fa-angle-double-right fa-fw"}))))}return""!==this.addElementRoute&&t.push(r.a.createElement("a",{href:"#",key:"add",className:"close-button gray ml-3",onClick:function(t){return e.handleAddClick(t,e.addElementRoute,"_self")},title:this.row.addElement},r.a.createElement("span",{className:"fas fa-plus-circle fa-fw text-gray-800 hover:text-purple-600"}))),t}},{key:"filterContent",value:function(e,t){var a=this;e===[]&&(e=this.state.filter);var n=this.content;if(e.map((function(e){var t=a.filters[e],r=n.filter((function(e){if(t.value===e[t.contentKey])return e}));n=r})),this.search&&""!==t){t=t.toLowerCase();var r=[];n.filter((function(e){var n=!1;a.row.columns.map((function(a){a.search&&a.contentKey.map((function(a){!n&&void 0!==e[a]&&e[a].toLowerCase().includes(t)&&(n=!0,r.push(e))}))}))})),n=r}return n}},{key:"changeFilter",value:function(e){var t=this,a=_({},this.state.filterGroups);if(null===e){if(null===this.defaultFilter){var n=this.paginateContent(this.content,this.state.offset);return void this.setState({results:n,control:this.buildControl(this.state.offset,n),sizeButtons:this.buildPageSizeControls(this.state.pageMax),confirm:!1})}if(0===Object.keys(a).length){if(a={},this.state.filter.length>0){var r=0;this.state.filter.map((function(n){var o=t.filters[n];0===r?(a[o.group]="",e=o):a[o.group]=o.value,r+=1}))}Object.keys(this.defaultFilter).map((function(n){if(null===e)e=t.defaultFilter[n],a[e.group]="";else{var r=t.defaultFilter[n];a[r.group]=r.name}}))}}else if(void 0===e.group){if(""===e.target.value)return;e=this.filters[e.target.value]}var o=this.state.filter;if(this.filterGroups){var s=a[e.group];void 0===s?a[e.group]=e.name:s===e.name?delete a[e.group]:a[e.group]=e.name,null!==this.defaultFilter&&Object.keys(this.defaultFilter).map((function(n){e=t.defaultFilter[n],void 0===a[e.group]&&(a[e.group]=e.name)})),o=Object.keys(a).map((function(e){return a[e]}))}else o=[e.name];var l=this.filterContent(o,this.state.search),i=this.paginateContent(this.sortContent("","",l),0,0);this.setState({results:i,control:this.buildControl(this.state.offset,i),filter:o,filteredContent:l,filterGroups:a})}},{key:"changeSearch",value:function(e){var t=this.filterContent(this.state.filter,e.target.value),a=this.paginateContent(this.sortContent("","",t),0,0);this.setState({search:e.target.value,results:a,control:this.buildControl(this.state.offset,a),filteredContent:t})}},{key:"clearSearch",value:function(e){var t=this.filterContent(this.state.filter,""),a=this.paginateContent(this.sortContent("","",t),0,0);this.setState({search:"",results:a,control:this.buildControl(this.state.offset,a),filteredContent:t})}},{key:"searchFilter",value:function(){return this.search?"":Object.keys(this.filters).length>0?"":"none"}},{key:"storeFilter",value:function(){var e=this;if(null!==this.storeFilterURL){var t={};t.filter=this.state.filter,t.search=this.state.search,this.storeFilterWait=!0,Object(v.a)(this.storeFilterURL,{method:"POST",body:JSON.stringify(t)},!1).then((function(t){e.storeFilterWait=!1}))}}},{key:"render",value:function(){var e=this;return this.storeFilter(),r.a.createElement("div",null,r.a.createElement("div",{className:"text-xs text-gray-600 text-left"},r.a.createElement(P,{messages:this.state.messages,translate:this.translate}),r.a.createElement("span",{style:{float:"left",clear:"both"}},this.buildPageSizeControls()),r.a.createElement("span",{style:{float:"right"}},this.buildControl())),r.a.createElement("table",{className:"w-full striped"},r.a.createElement("thead",null,r.a.createElement("tr",{style:{display:this.searchFilter()}},r.a.createElement("td",{colSpan:this.columnCount},r.a.createElement("table",{className:"noIntBorder fullWidth relative"},r.a.createElement("tbody",null,r.a.createElement(g,{search:this.search,messages:this.messages,clearSearch:this.clearSearch,changeSearch:this.changeSearch,searchValue:this.state.search}),r.a.createElement(p,{filter:this.state.filter,filters:this.filters,changeFilter:this.changeFilter,messages:this.messages,filterGroups:this.state.filterGroups,defaultFilters:null!==this.defaultFilter}))))),r.a.createElement(o,{row:this.row,sortColumn:this.sortColumn,sortColumnName:this.state.sortColumn,sortColumnDirection:this.state.sortDirection})),r.a.createElement(h,{row:this.row,content:this.state.results,functions:this.functions,draggableSort:this.draggableSort})),r.a.createElement(b,{messages:this.messages,doit:function(){return e.deleteItem(e.path)},cancel:function(){return e.closeConfirm()},confirm:this.state.confirm}),r.a.createElement(y,{messages:this.messages,cancel:function(){return e.closeConfirm()},information:this.state.information}))}}])&&A(a.prototype,n),s&&A(a,s),t}(n.Component);R.defaultProps={draggableRoute:""}}},[["8fXb","runtime",0,2]]]);